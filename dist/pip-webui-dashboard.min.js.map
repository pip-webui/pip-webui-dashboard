{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/Dashboard.ts","src/DashboardComponent.ts","src/DashboardController.ts","src/dialogs/add_component/AddComponentDialogController.ts","src/dialogs/add_component/AddComponentProvider.ts","src/dialogs/widget_config/ConfigDialogController.ts","src/dialogs/widget_config/ConfigDialogExtendComponent.ts","src/dialogs/widget_config/ConfigDialogService.ts","src/draggable/Draggable.ts","src/draggable/DraggableController.ts","src/draggable/DraggableDirective.ts","src/draggable/DraggableTileService.ts","src/draggable/draggable_group/DraggableTilesGroupDirective.ts","src/draggable/draggable_group/DraggableTilesGroupService.ts","src/utility/WidgetTemplateUtility.ts","src/widgets/Widgets.ts","src/widgets/calendar/WidgetCalendar.ts","src/widgets/event/WidgetEvent.ts","src/widgets/menu/WidgetMenuDirective.ts","src/widgets/menu/WidgetMenuService.ts","src/widgets/notes/WidgetNotes.ts","src/widgets/picture_slider/WidgetPictureSlider.ts","src/widgets/position/WidgetPosition.ts","src/widgets/statistics/WidgetStatistics.ts","temp/pip-webui-dashboard-html.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","pip","dashboard","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","angular","pipDashboard","bindings","gridOptions","groupAdditionalActions","groupedWidgets","controller","controllerAs","templateUrl","component","setTranslations","$injector","pipTranslate","has","get","DROP_TO_CREATE_NEW_GROUP","configureAvailableWidgets","pipAddComponentDialogProvider","configWidgetList","title","icon","name","amount","$inject","defineProperty","value","DEFAULT_GRID_OPTIONS","draggableOptions","tileWidth","tileHeight","gutter","inline","$scope","$rootScope","$attrs","$element","$timeout","$interpolate","pipAddComponentDialog","pipWidgetTemplate","callback","groupIndex","_this","addComponent","removeGroup","console","log","_includeTpl","groupMenuActions","defaultGroupMenuActions","splice","_$scope","_$rootScope","_$attrs","_$element","_$timeout","_$interpolate","_pipAddComponentDialog","_pipWidgetTemplate","addClass","draggableGridOptions","extend","widgetsContext","compileWidgets","prototype","group","removedWidgets","source","map","widget","index","size","colSpan","rowSpan","menu","click","item","params","object","removeWidget","opts","template","getTemplate","show","data","activeGroup","addWidgets","widgets","push","widgetGroup","forEach","apply","Array","type","options","DashboardController","run","4","AddComponentDialogController","groups","activeGroupIndex","widgetList","$mdDialog","_","isNumber","defaultWidgets","cloneDeep","_mdDialog","add","hide","cancel","encrease","widgetIndex","decrease","5","AddComponentDialogService","_widgetList","AddComponentDialogProvider","list","$get","_service","provider","6","TileColors","all","TileSizes","id","WidgetConfigDialogController","$compile","dialogTitle","colors","sizes","sizeId","onApply","sizeX","Number","substr","sizeY","onCancel","./ConfigDialogService","7","$templateRequest","scope","link","pipExtensionUrl","then","html","find","replaceWith","directive","pipWidgetConfigComponent","8","WidgetConfigDialogService","successCallback","cancelCallback","event","locals","clickOutsideToClose","key","service","9","Object","./DraggableController","./DraggableDirective","./DraggableTileService","./draggable_group/DraggableTilesGroupDirective","./draggable_group/DraggableTilesGroupService","10","DraggableTileService_1","DraggableTilesGroupService_1","SIMPLE_LAYOUT_COLUMNS_COUNT","DEFAULT_TILE_WIDTH","DEFAULT_TILE_HEIGHT","UPDATE_GROUPS_EVENT","DEFAULT_OPTIONS","DraggableController","pipDragTile","pipTilesGrid","pipMedia","sourceDropZoneElem","isSameDropzone","tileGroups","merge","mobileBreakpoint","breakpoints","xs","tilesTemplates","tile","tileScope","$new","tilesContext","IDragTileConstructor","DragTileService","tpl","newVal","debounce","availableWidth","getContainerWidth","availableColumns","getAvailableColumns","setAvailableColumns","generateGrid","getSingleTileWidthForMobile","setTilesDimensions","calcContainerHeight","watch","prevVal","changedGroupIndex","addGroup","groupWidgetDiff","newTiles","slice","each","addTilesIntoGroup","groupsContainers","updateTilesGroups","removeTiles","updateTilesOptions","onTitleClick","editingName","oldTitle","clone","$","currentTarget","children","focus","cancelEditing","onBlurTitleInput","$broadcast","onKyepressTitleInput","updateTilesTemplates","updateType","_a","fromIndex","from","elem","attributes","toIndex","to","tileOptions","fromTileIndex","reIndexTiles","indexes","container","tiles","remove","gIndex","undefined","child","element","removeGroups","newGroups","removeIndexes","remain","containers","findIndex","reverse","sourceGroup","_$compile","$$phase","$apply","document","querySelectorAll","groupContaninerSelector","ITilesGridConstructor","TilesGridService","groupContainer","addTile","newTile","append","getCompiledTemplate","optionsGroup","optionGroup","updateTileOptions","initTilesGroups","onlyPosition","draggedTile","width","floor","getActiveGroupAndTile","active","foundTile","getTileByNode","onDragStartListener","activeEntities","target","parent","activeDraggedGroup","startDrag","onDragMoveListener","x","parseFloat","style","left","dx","y","top","dy","containerOffset","getContainerOffset","getTileByCoordinates","pageX","pageY","draggedTileIndex","getTileIndex","belowElemIndex","belowElement","swapTiles","setGroupContainersHeight","onDragEndListener","stopDrag","removeClass","containerRect","getBoundingClientRect","tileGroup","moveTile","movedTile","removeTile","getElem","bind","onDropListener","droppedGroupIndex","droppedGroup","onDropToFictGroupListener","onDropEnterListener","dragEvent","dragEnter","classList","css","onDropDeactivateListener","activeDropzoneClass","onDropLeaveListener","initialize","draggable","autoScroll","onstart","onmove","onend","dropzone","ondrop","ondragenter","ondropdeactivate","ondragleave","on","interact","trigger","11","DragDirective","restrict","$elem","$container","12","constructor","DEFAULT_TILE_SIZE","getSize","setSize","height","setPosition","updateElem","preview","zIndex","isAnimate","onTransitionEnd","off","setPreviewPosition","coords","getOptions","setOptions","$attr","wrapComponent","docFrag","createDocumentFragment","$eval","pipDraggableTiles","appendChild","DraggableTile","14","columns","gridCells","isMobileLayout","MOBILE_LAYOUT_COLUMNS","getCellByPosition","row","col","getCells","prevCell","getAvailableCellsMobile","getAvailableCellsDesktop","leftCornerCell","rightCornerCell","getBasicRow","getCell","gridCopy","basicRow","basicCol","rowShift","prevTileSize","isCellFree","start","end","src","cell","getCellIndex","srcCell","rowIndex","reserveCells","clearElements","singleTileWidth","generateCells","newCellCount","colsInRow","rows","gridInRow","offset","bottom","right","querySelector","srcTiles","tileSize","currIndex","startCell","cells","maxHeightSize","maxWidthSize","maxBy","node","filter","beforeTile","movedTileIndex","beforeTileIndex","droppedTile","newGrid","15","ImageLoad","$parse","attrs","pipImageLoad","widgetTemplateService","strictCompile","result","interpolated","_$templateRequest","setImageMarginCSS","image","containerWidth","clientWidth","containerHeight","clientHeight","imageWidth","naturalWidth","imageHeight","naturalHeight","margin","cssParams","16","extendStatics","setPrototypeOf","__proto__","d","b","p","hasOwnProperty","__","create","_super","CalendarWidgetController","pipWidgetMenu","pipWidgetConfigDialogService","color","_configDialog","union","onConfigClick","date","Date","dialogClass","extensionUrl","changeSize","MenuWidgetService","opacity","$watch","is","drawImage","EventWidgetController","onImageLoad","text","onOpacitytest","_oldOpacity","pipEventWidget","19","pipMenuWidget","noop","action","callAction","actionName","MenuWidgetProvider","NotesWidgetController","PictureSliderController","animationType","_widgetUtility","animationInterval","$event","WidgetMenuService_1","pipPictureSliderWidget","PositionWidgetController","pipLocationEditDialog","showPosition","_locationDialog","openLocationEditDialog","location","position","reDrawPosition","locationName","hideColors","locationPos","newPosition","locatioName","pipPositionWidget","reset","chartSize","SMALL_CHART","setChartSize","StatisticsWidgetController","BIG_CHART","bindToController","pipStatisticsWidget","../menu/WidgetMenuService","25","$templateCache","put"],"mappings":"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","file":"pip-webui-dashboard.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import './widgets/Widgets';\r\nimport './draggable/Draggable';\r\n\r\n(function () {\r\n  'use strict';\r\n\r\n  angular.module('pipDashboard', [\r\n    'pipWidget', \r\n    'pipDragged', \r\n    'pipWidgetConfigDialog', \r\n    'pipAddDashboardComponentDialog',\r\n    'pipDashboard.Templates',\r\n\r\n    // External pip modules\r\n    'pipLayout',\r\n    'pipLocations',\r\n    'pipDateTime',\r\n    'pipCharts',\r\n    'pipTranslate',\r\n    'pipControls'\r\n  ]);\r\n  \r\n})();\r\n\r\nimport './utility/WidgetTemplateUtility';\r\nimport './dialogs/widget_config/ConfigDialogController';\r\nimport './dialogs/add_component/AddComponentDialogController';\r\nimport './DashboardController';\r\nimport './DashboardComponent';\r\n","(function () {\r\n  'use strict';\r\n\r\n  const pipDashboard = {\r\n    bindings: {\r\n      gridOptions: '=pipGridOptions',\r\n      groupAdditionalActions: '=pipGroupActions',\r\n      groupedWidgets: '=pipGroups'\r\n    },\r\n    controller: 'pipDashboardCtrl',\r\n    controllerAs: 'dashboardCtrl',\r\n    templateUrl: 'Dashboard.html'\r\n  }\r\n\r\n  angular\r\n    .module('pipDashboard')\r\n    .component('pipDashboard', pipDashboard);\r\n})();","'use strict';\r\n\r\nimport { IWidgetTemplateService } from './utility/WidgetTemplateUtility';\r\n\r\nfunction setTranslations($injector) {\r\n  var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n  if (pipTranslate) {\r\n    pipTranslate.setTranslations('en', {\r\n      DROP_TO_CREATE_NEW_GROUP: 'Drop here to create new group',\r\n    });\r\n    pipTranslate.setTranslations('ru', {\r\n      DROP_TO_CREATE_NEW_GROUP: 'Перетащите сюда для создания новой группы'\r\n    });\r\n  }\r\n}\r\n\r\nfunction configureAvailableWidgets(pipAddComponentDialogProvider) {\r\n  pipAddComponentDialogProvider.configWidgetList([\r\n    [{\r\n        title: 'Event',\r\n        icon: 'document',\r\n        name: 'event',\r\n        amount: 0\r\n      },\r\n      {\r\n        title: 'Position',\r\n        icon: 'location',\r\n        name: 'position',\r\n        amount: 0\r\n      }\r\n    ],\r\n    [{\r\n        title: 'Calendar',\r\n        icon: 'date',\r\n        name: 'calendar',\r\n        amount: 0\r\n      },\r\n      {\r\n        title: 'Sticky Notes',\r\n        icon: 'note-take',\r\n        name: 'notes',\r\n        amount: 0\r\n      },\r\n      {\r\n        title: 'Statistics',\r\n        icon: 'tr-statistics',\r\n        name: 'statistics',\r\n        amount: 0\r\n      }\r\n    ]\r\n  ]);\r\n}\r\n\r\nimport { IAddComponentDialogService } from './dialogs/add_component/AddComponentProvider'\r\n\r\nclass draggableOptions {\r\n  tileWidth: number;\r\n  tileHeight: number;\r\n  gutter: number;\r\n  inline: boolean;\r\n}\r\n\r\nlet DEFAULT_GRID_OPTIONS: draggableOptions = {\r\n  tileWidth: 150, // 'px'\r\n  tileHeight: 150, // 'px'\r\n  gutter: 10, // 'px'\r\n  inline: false\r\n};\r\n\r\nclass DashboardController {\r\n  private defaultGroupMenuActions: any = [{\r\n      title: 'Add Component',\r\n      callback: (groupIndex) => {\r\n        this.addComponent(groupIndex);\r\n      }\r\n    },\r\n    {\r\n      title: 'Remove',\r\n      callback: (groupIndex) => {\r\n        this.removeGroup(groupIndex);\r\n      }\r\n    },\r\n    {\r\n      title: 'Configurate',\r\n      callback: (groupIndex) => {\r\n        console.log('configurate group with index:', groupIndex);\r\n      }\r\n    }\r\n  ];\r\n  private _$scope: angular.IScope;\r\n  private _$rootScope: angular.IRootScopeService;\r\n  private _$attrs: any;\r\n  private _$element: any;\r\n  private _$timeout: angular.ITimeoutService;\r\n  private _$interpolate: angular.IInterpolateService;\r\n  private _pipAddComponentDialog: IAddComponentDialogService;\r\n  private _pipWidgetTemplate: IWidgetTemplateService;\r\n  private _includeTpl: string = '<pip-{{ type }}-widget group=\"groupIndex\" index=\"index\"' +\r\n    'pip-options=\"$parent.dashboardCtrl.groupedWidgets[groupIndex][\\'source\\'][index].opts\">' +\r\n    '</pip-{{ type }}-widget>';\r\n\r\n  public groupedWidgets: any;\r\n  public draggableGridOptions: draggableOptions;\r\n  public widgetsTemplates: any;\r\n  public groupMenuActions: any = this.defaultGroupMenuActions;\r\n  public widgetsContext: any;\r\n\r\n  constructor(\r\n    $scope: angular.IScope,\r\n    $rootScope: angular.IRootScopeService,\r\n    $attrs: any,\r\n    $element: any,\r\n    $timeout: angular.ITimeoutService,\r\n    $interpolate: angular.IInterpolateService,\r\n    pipAddComponentDialog: IAddComponentDialogService,\r\n    pipWidgetTemplate: IWidgetTemplateService\r\n  ) {\r\n    this._$scope = $scope;\r\n    this._$rootScope = $rootScope;\r\n    this._$attrs = $attrs;\r\n    this._$element = $element;\r\n    this._$timeout = $timeout;\r\n    this._$interpolate = $interpolate;\r\n    this._pipAddComponentDialog = pipAddComponentDialog;\r\n    this._pipWidgetTemplate = pipWidgetTemplate;\r\n\r\n    // Add class to style scroll bar\r\n    $element.addClass('pip-scroll');\r\n\r\n    // Set tiles grid options\r\n    this.draggableGridOptions = $scope['gridOptions'] || DEFAULT_GRID_OPTIONS;\r\n\r\n    // Switch inline displaying\r\n    if (this.draggableGridOptions.inline === true) {\r\n      $element.addClass('inline-grid');\r\n    }\r\n    // Extend group's menu actions\r\n    if ($scope['groupAdditionalActions']) angular.extend(this.groupMenuActions, $scope['groupAdditionalActions']);\r\n\r\n    // Compile widgets\r\n    this.widgetsContext = $scope;\r\n    this.compileWidgets();\r\n\r\n    this._$timeout(() => {\r\n      this._$element.addClass('visible');\r\n    }, 700);\r\n  }\r\n\r\n  private compileWidgets() {\r\n    _.each(this.groupedWidgets, (group, groupIndex) => {\r\n        group.removedWidgets = group.removedWidgets || [],\r\n        group.source = group.source.map((widget, index) => {\r\n          // Establish default props\r\n          widget.size = widget.size || {\r\n            colSpan: 1,\r\n            rowSpan: 1\r\n          };\r\n          widget.index = index;\r\n          widget.groupIndex = groupIndex;\r\n          widget.menu = widget.menu || {};\r\n          angular.extend(widget.menu, [{\r\n            title: 'Remove',\r\n            click: (item, params, object) => {\r\n              this.removeWidget(item, params, object);\r\n            }\r\n          }]);\r\n\r\n          return {\r\n            opts: widget,\r\n            template: this._pipWidgetTemplate.getTemplate(widget, this._includeTpl)\r\n          };\r\n        })\r\n    });\r\n  }\r\n\r\n  public addComponent(groupIndex) {\r\n    this._pipAddComponentDialog\r\n      .show(this.groupedWidgets, groupIndex)\r\n      .then((data) => {\r\n        var activeGroup;\r\n\r\n        if (!data) {\r\n          return;\r\n        }\r\n\r\n        if (data.groupIndex !== -1) {\r\n          activeGroup = this.groupedWidgets[data.groupIndex];\r\n        } else {\r\n          activeGroup = {\r\n            title: 'New group',\r\n            source: []\r\n          };\r\n        }\r\n\r\n        this.addWidgets(activeGroup.source, data.widgets);\r\n\r\n        if (data.groupIndex === -1) {\r\n          this.groupedWidgets.push(activeGroup);\r\n        }\r\n\r\n        this.compileWidgets();\r\n      });\r\n  };\r\n\r\n  public removeGroup = (groupIndex) => {\r\n    console.log('removeGroup', groupIndex);\r\n    this.groupedWidgets.splice(groupIndex, 1);\r\n  }\r\n\r\n  private addWidgets(group, widgets) {\r\n    widgets.forEach((widgetGroup) => {\r\n      widgetGroup.forEach((widget) => {\r\n        if (widget.amount) {\r\n          Array.apply(null, Array(widget.amount)).forEach(() => {\r\n            group.push({\r\n              type: widget.name\r\n            });\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  private removeWidget(item, params, object) {\r\n    this.groupedWidgets[params.options.groupIndex].removedWidgets = [];\r\n    this.groupedWidgets[params.options.groupIndex].removedWidgets.push(params.options.index);\r\n    this.groupedWidgets[params.options.groupIndex].source.splice(params.options.index, 1);\r\n    this._$timeout(() => {\r\n      this.groupedWidgets[params.options.groupIndex].removedWidgets = [];\r\n    });\r\n  }\r\n\r\n}\r\n\r\nangular\r\n  .module('pipDashboard')\r\n  .config(configureAvailableWidgets)\r\n  .run(setTranslations)\r\n  .controller('pipDashboardCtrl', DashboardController);","'use strict';\r\n\r\nexport class AddComponentDialogController {\r\n    public _mdDialog: angular.material.IDialogService;\r\n    public activeGroupIndex: number;\r\n    public defaultWidgets: any;\r\n    public groups: any;\r\n\r\n    constructor(\r\n        groups, \r\n        activeGroupIndex, \r\n        widgetList,\r\n        $mdDialog: angular.material.IDialogService\r\n    ) {\r\n        this.activeGroupIndex = _.isNumber(activeGroupIndex) ? activeGroupIndex : -1;\r\n        this.defaultWidgets   = _.cloneDeep(widgetList);\r\n        this.groups = _.map(groups, function (group) {\r\n          return group['title'];\r\n        });\r\n        this._mdDialog = $mdDialog;\r\n    }\r\n\r\n    public add () {\r\n          this._mdDialog.hide({\r\n            groupIndex: this.activeGroupIndex,\r\n            widgets   : this.defaultWidgets\r\n          });\r\n        };\r\n\r\n    public cancel () {\r\n          this._mdDialog.cancel();\r\n        };\r\n\r\n    public encrease (groupIndex, widgetIndex) {\r\n          var widget = this.defaultWidgets[groupIndex][widgetIndex];\r\n          widget.amount++;\r\n    };\r\n\r\n    public decrease (groupIndex, widgetIndex) {\r\n          var widget    = this.defaultWidgets[groupIndex][widgetIndex];\r\n          widget.amount = widget.amount ? widget.amount - 1 : 0;\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipAddDashboardComponentDialog', ['ngMaterial'])\r\n    .controller('pipAddDashboardComponentDialogController', AddComponentDialogController);\r\n\r\nimport './AddComponentProvider';","'use strict';\r\n\r\nexport interface IAddComponentDialogService {\r\n  show(groups, activeGroupIndex): any;\r\n}\r\n\r\nclass AddComponentDialogService implements IAddComponentDialogService {\r\n    public _mdDialog: angular.material.IDialogService;\r\n    private _widgetList: any;\r\n\r\n    public constructor(widgetList: any, $mdDialog: angular.material.IDialogService) {\r\n        this._mdDialog = $mdDialog;\r\n        this._widgetList = widgetList;\r\n    }\r\n\r\n    public show(groups, activeGroupIndex) {\r\n        return this._mdDialog\r\n          .show({\r\n            templateUrl     : 'dialogs/add_component/AddComponent.html',\r\n            bindToController: true,\r\n            controller      : 'pipAddDashboardComponentDialogController',\r\n            controllerAs    : 'dialogCtrl',\r\n            resolve: {\r\n              groups: () => {\r\n                return groups;\r\n              },\r\n              activeGroupIndex: () => {\r\n                return activeGroupIndex;\r\n              },\r\n              widgetList: () => {\r\n                return this._widgetList;\r\n              }\r\n           }\r\n          });\r\n      };\r\n}\r\n\r\nclass AddComponentDialogProvider {\r\n  private _service: AddComponentDialogService;\r\n  private _widgetList: any = null;\r\n\r\n  constructor() {\r\n  }\r\n\r\n  public configWidgetList = function (list) {\r\n      this._widgetList = list;\r\n  };\r\n\r\n  public $get($mdDialog: angular.material.IDialogService) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new AddComponentDialogService(this._widgetList, $mdDialog);\r\n        \r\n        return this._service;\r\n  }\r\n}\r\n\r\nangular\r\n    .module('pipDashboard')\r\n    .provider('pipAddComponentDialog', AddComponentDialogProvider);\r\n","'use strict';\r\n\r\nclass TileColors {\r\n    static all: string[] = ['purple', 'green', 'gray', 'orange', 'blue'];\r\n}\r\n\r\nclass TileSizes {\r\n    static all: any = [\r\n        {name: 'SMALL', id: '11'},\r\n        {name: 'WIDE', id: '21'},\r\n        {name: 'LARGE', id: '22'}\r\n    ];\r\n}\r\n\r\nexport class WidgetConfigDialogController {\r\n    public dialogTitle: string = \"Edit tile\";\r\n    public $mdDialog: angular.material.IDialogService;\r\n    public transclude: any;\r\n    public params: any;\r\n    public colors: string[] = TileColors.all;\r\n    public sizes: any = TileSizes.all;\r\n    public sizeId: string = TileSizes.all[0].id;\r\n\r\n    private _$element: any;\r\n    private _$timeout: angular.ITimeoutService;\r\n\r\n    constructor(\r\n        params,\r\n        $mdDialog: angular.material.IDialogService,\r\n        $compile: angular.ICompileService,\r\n        $timeout: angular.ITimeoutService,\r\n        $injector,\r\n        $scope: angular.IScope,\r\n        $rootScope) {\r\n        \"ngInject\";\r\n\r\n        this.$mdDialog = $mdDialog;\r\n        this._$timeout = $timeout;\r\n\r\n        this.params = params;\r\n        angular.extend(this, this.params);\r\n        this.sizeId = '' + this.params.size.colSpan + this.params.size.rowSpan;\r\n    }\r\n\r\n    public onApply(): void {\r\n        this['size'].sizeX = Number(this.sizeId.substr(0, 1));\r\n        this['size'].sizeY = Number(this.sizeId.substr(1, 1));\r\n        this.$mdDialog.hide(this);\r\n    }\r\n\r\n    public onCancel(): void {\r\n        this.$mdDialog.cancel();\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipWidgetConfigDialog', ['ngMaterial'])\r\n    .controller('pipWidgetConfigDialogController', WidgetConfigDialogController);\r\n\r\nimport './ConfigDialogService';\r\nimport './ConfigDialogExtendComponent';","\r\n(() => {\r\n    'use strict';\r\n    \r\n    function pipWidgetConfigComponent(\r\n        $templateRequest: angular.ITemplateRequestService,\r\n        $compile: angular.ICompileService\r\n    ) {\r\n        return {\r\n            restrict: 'E',\r\n            templateUrl: 'dialogs/widget_config/ConfigDialogExtendComponent.html',\r\n            scope: false,\r\n            link: ($scope: angular.IScope, $element: any, $attrs: any) => {\r\n                $templateRequest($attrs.pipExtensionUrl, false).then((html) => {\r\n                    $element.find('pip-extension-point').replaceWith($compile(html)($scope));\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipWidgetConfigDialog')\r\n        .directive('pipWidgetConfigExtendComponent', pipWidgetConfigComponent);\r\n\r\n})();","export interface IWidgetConfigService {\r\n    show(params: any, successCallback?: (key) => void, cancelCallback?: () => void): any;\r\n}\r\n\r\nclass WidgetConfigDialogService {\r\n  public _mdDialog: angular.material.IDialogService;\r\n    public constructor($mdDialog: angular.material.IDialogService) {\r\n        this._mdDialog = $mdDialog;\r\n    }\r\n    public show(params, successCallback?: (key) => void, cancelCallback?: () => void) {\r\n         this._mdDialog.show({\r\n            targetEvent: params.event,\r\n            templateUrl: params.templateUrl || 'dialogs/widget_config/ConfigDialog.html',\r\n            controller: 'pipWidgetConfigDialogController',\r\n            controllerAs: 'vm',\r\n            locals: {params: params},\r\n            clickOutsideToClose: true\r\n         })\r\n        .then((key) => {\r\n            if (successCallback) {\r\n                successCallback(key);\r\n            }\r\n        }, () => {\r\n            if (cancelCallback) {\r\n                cancelCallback();\r\n            }\r\n        });         \r\n    }\r\n}\r\n\r\n\r\n(() => {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('pipWidgetConfigDialog')\r\n    .service('pipWidgetConfigDialogService', WidgetConfigDialogService);\r\n  \r\n})();\r\n","(function () {\r\n  'use strict';\r\n\r\n  angular.module('pipDragged', []);\r\n})();\r\n\r\nimport './DraggableTileService';\r\nimport './DraggableController';\r\nimport './DraggableDirective';\r\nimport './draggable_group/DraggableTilesGroupService'\r\nimport './draggable_group/DraggableTilesGroupDirective'","'use strict';\r\n\r\ndeclare var interact;\r\n\r\nimport { DragTileService, IDragTileService, IDragTileConstructor } from './DraggableTileService';\r\nimport { TilesGridService, ITilesGridService, ITilesGridConstructor } from './draggable_group/DraggableTilesGroupService';\r\n\r\nlet SIMPLE_LAYOUT_COLUMNS_COUNT: number = 2;\r\nexport let DEFAULT_TILE_WIDTH: number = 150;\r\nexport let DEFAULT_TILE_HEIGHT: number = 150;\r\nexport let UPDATE_GROUPS_EVENT = \"pipUpdateDashboardGroupsConfig\";\r\n\r\nlet DEFAULT_OPTIONS = {\r\n    tileWidth              : DEFAULT_TILE_WIDTH,   // 'px'\r\n    tileHeight             : DEFAULT_TILE_HEIGHT,   // 'px'\r\n    gutter                 : 20,    // 'px'\r\n    container              : 'pip-draggable-grid:first-of-type',\r\n    //mobileBreakpoint       : XXX,   // Get from pipMedia Service in the constructor\r\n    activeDropzoneClass    : 'dropzone-active',\r\n    groupContaninerSelector: '.pip-draggable-group:not(.fict-group)',\r\n};\r\n\r\nclass DraggableController {\r\n  public opts: any;\r\n  public groups: any;\r\n  public sourceDropZoneElem: any = null;\r\n  public isSameDropzone: boolean = true;\r\n  public tileGroups: any = null;\r\n  public availableWidth: any;\r\n  public availableColumns: any;\r\n  public groupsContainers: any;\r\n  public container: any;\r\n  public activeDraggedGroup: any;\r\n  public draggedTile: any;\r\n  public containerOffset: any;\r\n\r\n  private _$timeout: angular.ITimeoutService;\r\n  private _$rootScope: angular.IRootScopeService;\r\n  private _$scope: angular.IScope;\r\n  private _$compile: angular.ICompileService;\r\n  private _$element: any;\r\n\r\n  constructor(\r\n    $scope: angular.IScope, \r\n    $rootScope: angular.IRootScopeService, \r\n    $compile: angular.ICompileService, \r\n    $timeout: angular.ITimeoutService,\r\n    $element: any, \r\n    pipDragTile: IDragTileService, \r\n    pipTilesGrid: ITilesGridService,\r\n    pipMedia: pip.layouts.IMediaService\r\n  ) {\r\n    this._$timeout = $timeout;\r\n    this._$rootScope = $rootScope;\r\n    this._$scope = $scope;\r\n    this._$compile = $compile;\r\n    this._$element = $element;\r\n\r\n    this.opts = _.merge({ mobileBreakpoint: pipMedia.breakpoints.xs }, DEFAULT_OPTIONS, $scope['draggableCtrl'].options);\r\n\r\n    this.groups = $scope['draggableCtrl'].tilesTemplates.map((group, groupIndex) => {\r\n      return {\r\n        title : group.title,\r\n        editingName : false,\r\n        index: groupIndex,\r\n        source: group.source.map((tile) => {\r\n          let tileScope = $rootScope.$new(false, $scope['draggableCtrl'].tilesContext);\r\n          tileScope['index'] = tile.opts.index;\r\n          tileScope['groupIndex'] = tile.opts.groupIndex;\r\n\r\n          return IDragTileConstructor(DragTileService, {\r\n            tpl    : $compile(tile.template)(tileScope),\r\n            options: tile.opts,\r\n            size   : tile.opts.size\r\n          });\r\n        })\r\n      };\r\n    });\r\n\r\n    // Add templates watcher\r\n    $scope.$watch('draggableCtrl.tilesTemplates', (newVal) => {\r\n      this.watch(newVal);\r\n    }, true);\r\n\r\n    // Initialize data\r\n    this.initialize();\r\n\r\n    // Resize handler TODO: replace by pip resize watchers\r\n    $(window).on('resize', _.debounce(() => {\r\n      this.availableWidth   = this.getContainerWidth();\r\n      this.availableColumns = this.getAvailableColumns(this.availableWidth);\r\n\r\n      this.tileGroups.forEach((group) => {\r\n        group\r\n          .setAvailableColumns(this.availableColumns)\r\n          .generateGrid(this.getSingleTileWidthForMobile(this.availableWidth))\r\n          .setTilesDimensions()\r\n          .calcContainerHeight();\r\n      });\r\n    }, 50));\r\n  }\r\n\r\n  // Watch handler\r\n  private watch(newVal) {\r\n      const prevVal = this.groups;\r\n      let changedGroupIndex = null;\r\n\r\n      if (newVal.length > prevVal.length) {\r\n        this.addGroup(newVal[newVal.length - 1]);\r\n\r\n        return;\r\n      }\r\n\r\n      if (newVal.length < prevVal.length) {\r\n        this.removeGroups(newVal);\r\n\r\n        return;\r\n      }\r\n\r\n      for (let i = 0; i < newVal.length; i++) {\r\n        const groupWidgetDiff = prevVal[i].source.length - newVal[i].source.length;\r\n        if (groupWidgetDiff || (newVal[i].removedWidgets && newVal[i].removedWidgets.length > 0)) {\r\n          changedGroupIndex = i;\r\n\r\n          if (groupWidgetDiff < 0) {\r\n            const newTiles = newVal[changedGroupIndex].source.slice(groupWidgetDiff);\r\n            \r\n            _.each(newTiles, (tile) => {\r\n              console.log('tile', tile);\r\n            });\r\n\r\n            this.addTilesIntoGroup(newTiles, this.tileGroups[changedGroupIndex], this.groupsContainers[changedGroupIndex]);\r\n\r\n            this._$timeout(() => { this.updateTilesGroups(); });\r\n          } else {\r\n            this.removeTiles(this.tileGroups[changedGroupIndex], newVal[changedGroupIndex].removedWidgets, this.groupsContainers[changedGroupIndex]);\r\n            this.updateTilesOptions(newVal);\r\n            this._$timeout(() => { this.updateTilesGroups(); });\r\n          }\r\n\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (newVal && this.tileGroups) {\r\n        this.updateTilesOptions(newVal);\r\n        this._$timeout(() => { this.updateTilesGroups(); });\r\n      }\r\n  }\r\n\r\n  // Inline edit group handlers\r\n  public onTitleClick(group, event) {\r\n      if (!group.editingName) {\r\n        group.oldTitle = _.clone(group.title);\r\n        group.editingName = true;\r\n        this._$timeout(() => {\r\n          $(event.currentTarget.children[0]).focus();\r\n        });\r\n      }\r\n  }\r\n\r\n  public cancelEditing (group) {\r\n      group.title = group.oldTitle;\r\n    }\r\n\r\n    public onBlurTitleInput (group) {\r\n      this._$timeout(() => {\r\n        group.editingName = false;\r\n        this._$rootScope.$broadcast(UPDATE_GROUPS_EVENT, this.groups);\r\n        // Update title in outer scope\r\n        this._$scope['draggableCtrl'].tilesTemplates[group.index].title = group.title;\r\n      }, 100);\r\n    }\r\n\r\n    public onKyepressTitleInput (group, event) {\r\n      if (event.keyCode === 13) {\r\n        this.onBlurTitleInput(group);\r\n      }\r\n    }\r\n\r\n    // Update outer scope functions\r\n    private updateTilesTemplates(updateType: string, source?: any) {\r\n      switch(updateType) {\r\n        case 'addGroup': \r\n          if (this.groups.length !== this._$scope['draggableCtrl'].tilesTemplates.length) {\r\n              this._$scope['draggableCtrl'].tilesTemplates.push(source);\r\n          }          \r\n          break;\r\n        case 'moveTile': \r\n          const {fromIndex, toIndex, tileOptions, fromTileIndex} = {\r\n            fromIndex: source.from.elem.attributes['data-group-id'].value,\r\n            toIndex: source.to.elem.attributes['data-group-id'].value,\r\n            tileOptions: source.tile.opts.options,\r\n            fromTileIndex: source.tile.opts.options.index\r\n          }\r\n          this._$scope['draggableCtrl'].tilesTemplates[fromIndex].source.splice(fromTileIndex, 1);\r\n          this._$scope['draggableCtrl'].tilesTemplates[toIndex].source.push({opts: tileOptions});\r\n\r\n          this.reIndexTiles(source.from.elem);\r\n          this.reIndexTiles(source.to.elem);\r\n          break;\r\n      }\r\n    }\r\n\r\n    // Manage tiles functions\r\n    private removeTiles(group, indexes, container) {\r\n      const tiles = $(container).find('.pip-draggable-tile');\r\n\r\n      _.each(indexes, (index) => {\r\n        group.tiles.splice(index, 1);\r\n        tiles[index].remove();\r\n      });\r\n\r\n      this.reIndexTiles(container);\r\n    }\r\n\r\n    private reIndexTiles(container, gIndex?) {\r\n      const tiles = $(container).find('.pip-draggable-tile'),\r\n            groupIndex = gIndex === undefined ? container.attributes['data-group-id'].value : gIndex;\r\n\r\n      _.each(tiles, (tile, index) => {\r\n        let child = $(tile).children()[0];\r\n        angular.element(child).scope()['index'] = index;\r\n        angular.element(child).scope()['groupIndex'] = groupIndex;\r\n      });\r\n    }\r\n\r\n    private removeGroups(newGroups) {\r\n      const removeIndexes = [],\r\n            remain = [],\r\n            containers = [];\r\n\r\n\r\n      _.each(this.groups, (group, index) => {\r\n          if (_.findIndex(newGroups, (g) => { return g['title'] === group.title}) < 0) {\r\n            removeIndexes.push(index);\r\n          } else {\r\n            remain.push(index);\r\n          }\r\n      });\r\n\r\n      _.each(removeIndexes.reverse(), (index) => {\r\n          this.groups.splice(index, 1);\r\n          this.tileGroups.splice(index, 1);\r\n      });\r\n\r\n      _.each(remain, (index) => {\r\n          containers.push(this.groupsContainers[index]);\r\n      });\r\n      \r\n       this.groupsContainers = containers;\r\n\r\n      _.each(this.groupsContainers, (container, index) => {\r\n          this.reIndexTiles(container, index);\r\n      });\r\n    }\r\n\r\n    private addGroup(sourceGroup) {\r\n      let group = {\r\n        title : sourceGroup.title,\r\n        source: sourceGroup.source.map((tile) => {\r\n          let tileScope = this._$rootScope.$new(false, this._$scope['draggableCtrl'].tilesContext);\r\n          tileScope['index'] = tile.opts.index == undefined ? tile.opts.options.index : tile.opts.index ;\r\n          tileScope['groupIndex'] = tile.opts.groupIndex == undefined ? tile.opts.options.groupIndex : tile.opts.groupIndex;\r\n          return IDragTileConstructor(DragTileService, {\r\n            tpl    : this._$compile(tile.template)(tileScope),\r\n            options: tile.opts,\r\n            size   : tile.opts.size\r\n          });\r\n        })\r\n      };\r\n\r\n      this.groups.push(group);\r\n      if (!this._$scope.$$phase) this._$scope.$apply();\r\n\r\n      this._$timeout(() => {\r\n        this.groupsContainers = document.querySelectorAll(this.opts.groupContaninerSelector);\r\n        this.tileGroups.push(\r\n          ITilesGridConstructor(TilesGridService, group.source, this.opts, this.availableColumns, this.groupsContainers[this.groupsContainers.length - 1])\r\n            .generateGrid(this.getSingleTileWidthForMobile(this.availableWidth))\r\n            .setTilesDimensions()\r\n            .calcContainerHeight()\r\n        );\r\n      });\r\n\r\n      this.updateTilesTemplates('addGroup', sourceGroup);\r\n    }\r\n\r\n    private addTilesIntoGroup(newTiles, group, groupContainer) {\r\n      newTiles.forEach((tile) => {\r\n        const tileScope = this._$rootScope.$new(false, this._$scope['draggableCtrl'].tilesContext);\r\n        tileScope['index'] = tile.opts.index == undefined ? tile.opts.options.index : tile.opts.index ;\r\n        tileScope['groupIndex'] = tile.opts.groupIndex == undefined ? tile.opts.options.groupIndex : tile.opts.groupIndex;\r\n\r\n        const newTile = IDragTileConstructor(DragTileService,{\r\n          tpl    : this._$compile(tile.template)(tileScope),\r\n          options: tile.opts,\r\n          size   : tile.opts.size\r\n        });\r\n\r\n        group.addTile(newTile);\r\n\r\n        $('<div>')\r\n          .addClass('pip-draggable-tile')\r\n          .append(newTile.getCompiledTemplate())\r\n          .appendTo(groupContainer);\r\n      });\r\n    }\r\n\r\n    private updateTilesOptions(optionsGroup) {\r\n      optionsGroup.forEach((optionGroup) => {\r\n        optionGroup.source.forEach((tileOptions) => {\r\n          this.tileGroups.forEach((group) => {\r\n            group.updateTileOptions(tileOptions.opts);\r\n          });\r\n        });\r\n      });\r\n    }\r\n\r\n    private initTilesGroups(tileGroups, opts, groupsContainers) {\r\n      return tileGroups.map((group, index) => {\r\n        return ITilesGridConstructor(TilesGridService, group.source, opts, this.availableColumns, groupsContainers[index])\r\n          .generateGrid(this.getSingleTileWidthForMobile(this.availableWidth))\r\n          .setTilesDimensions()\r\n          .calcContainerHeight();\r\n      });\r\n    }\r\n\r\n    private updateTilesGroups(onlyPosition?, draggedTile?) {\r\n      this.tileGroups.forEach((group) => {\r\n        if (!onlyPosition) {\r\n          group.generateGrid(this.getSingleTileWidthForMobile(this.availableWidth));\r\n        }\r\n\r\n        group\r\n          .setTilesDimensions(onlyPosition, draggedTile)\r\n          .calcContainerHeight();\r\n      });\r\n    }\r\n\r\n    private getContainerWidth(): any {\r\n      const container = this._$scope['$container'] || $('body');\r\n      return container.width();\r\n    }\r\n\r\n    private getAvailableColumns(availableWidth): any {\r\n      return this.opts.mobileBreakpoint > availableWidth ? SIMPLE_LAYOUT_COLUMNS_COUNT\r\n        : Math.floor(availableWidth / (this.opts.tileWidth + this.opts.gutter));\r\n    }\r\n\r\n    private getActiveGroupAndTile(elem): any {\r\n      const active = {};\r\n\r\n      this.tileGroups.forEach((group) => {\r\n        const foundTile = group.getTileByNode(elem);\r\n\r\n        if (foundTile) {\r\n          active['group'] = group;\r\n          active['tile']  = foundTile;\r\n          return;\r\n        }\r\n      });\r\n\r\n      return active;\r\n    }\r\n\r\n    private getSingleTileWidthForMobile(availableWidth): any {\r\n      return this.opts.mobileBreakpoint > availableWidth ? availableWidth / 2 - this.opts.gutter : null;\r\n    }\r\n\r\n    private onDragStartListener(event) {\r\n      const activeEntities = this.getActiveGroupAndTile(event.target);\r\n\r\n      this.container          = $(event.target).parent('.pip-draggable-group').get(0);\r\n      this.draggedTile        = activeEntities['tile'];\r\n      this.activeDraggedGroup = activeEntities['group'];\r\n      \r\n      this._$element.addClass('drag-transfer');\r\n\r\n      this.draggedTile.startDrag();\r\n    }\r\n\r\n    private onDragMoveListener(event) {\r\n      const target = event.target;\r\n      const x      = (parseFloat(target.style.left) || 0) + event.dx;\r\n      const y      = (parseFloat(target.style.top) || 0) + event.dy;\r\n\r\n      this.containerOffset = this.getContainerOffset();\r\n\r\n      target.style.left = x + 'px'; // TODO [apidhirnyi] Extract units into options section\r\n      target.style.top  = y + 'px';\r\n\r\n      const belowElement = this.activeDraggedGroup.getTileByCoordinates({\r\n        left: event.pageX - this.containerOffset.left,\r\n        top : event.pageY - this.containerOffset.top\r\n      }, this.draggedTile);\r\n\r\n      if (belowElement) {\r\n        const draggedTileIndex = this.activeDraggedGroup.getTileIndex(this.draggedTile);\r\n        const belowElemIndex   = this.activeDraggedGroup.getTileIndex(belowElement);\r\n\r\n        if ((draggedTileIndex + 1) === belowElemIndex) {\r\n          return;\r\n        }\r\n\r\n        this.activeDraggedGroup\r\n          .swapTiles(this.draggedTile, belowElement)\r\n          .setTilesDimensions(true, this.draggedTile);\r\n\r\n        this._$timeout(() => { this.setGroupContainersHeight(); }, 0);\r\n      }\r\n    }\r\n\r\n    private onDragEndListener() {\r\n      this.draggedTile.stopDrag(this.isSameDropzone);\r\n\r\n      this._$element.removeClass('drag-transfer');\r\n      this.activeDraggedGroup = null;\r\n      this.draggedTile        = null;\r\n    }\r\n\r\n    private getContainerOffset() {\r\n      const containerRect = this.container.getBoundingClientRect();\r\n\r\n      return {\r\n        left: containerRect.left,\r\n        top : containerRect.top\r\n      };\r\n    }\r\n\r\n    private setGroupContainersHeight() {\r\n      this.tileGroups.forEach((tileGroup) => {\r\n        tileGroup.calcContainerHeight();\r\n      });\r\n    }\r\n\r\n    private moveTile(from, to, tile) {\r\n      let elem;\r\n      const movedTile = from.removeTile(tile);\r\n      const tileScope = this._$rootScope.$new(false, this._$scope['draggableCtrl'].tilesContext);\r\n          tileScope['index'] = tile.opts.index == undefined ? tile.opts.options.index : tile.opts.index ;\r\n          tileScope['groupIndex'] = tile.opts.groupIndex == undefined ? tile.opts.options.groupIndex : tile.opts.groupIndex;\r\n\r\n      $(this.groupsContainers[_.findIndex(this.tileGroups, from)])\r\n        .find(movedTile.getElem())\r\n        .remove();\r\n\r\n      if (to !== null) {\r\n        to.addTile(movedTile);\r\n\r\n        elem = this._$compile(movedTile.getElem())(tileScope);\r\n\r\n        $(this.groupsContainers[_.findIndex(this.tileGroups, to)])\r\n          .append(elem);\r\n\r\n        this._$timeout(to.setTilesDimensions.bind(to, true));\r\n      }\r\n\r\n      this.updateTilesTemplates('moveTile', {from: from, to: to, tile: movedTile});\r\n    }\r\n\r\n    private onDropListener(event) {\r\n      const droppedGroupIndex = event.target.attributes['data-group-id'].value;\r\n      const droppedGroup      = this.tileGroups[droppedGroupIndex];\r\n\r\n      if (this.activeDraggedGroup !== droppedGroup) {\r\n        this.moveTile(this.activeDraggedGroup, droppedGroup, this.draggedTile);\r\n      }\r\n\r\n      this.updateTilesGroups(true);\r\n      this.sourceDropZoneElem = null;\r\n    }\r\n\r\n    private onDropToFictGroupListener(event) {\r\n      const from = this.activeDraggedGroup;\r\n      const tile = this.draggedTile;\r\n\r\n      this.addGroup({title: 'New group', source: []});\r\n      this._$timeout(() => {\r\n        this.moveTile(from, this.tileGroups[this.tileGroups.length - 1], tile);\r\n        this.updateTilesGroups(true);\r\n      });\r\n\r\n      this.sourceDropZoneElem = null;\r\n    }\r\n\r\n    private onDropEnterListener(event) {\r\n      if (!this.sourceDropZoneElem) {\r\n        this.sourceDropZoneElem = event.dragEvent.dragEnter;\r\n      }\r\n\r\n      if (this.sourceDropZoneElem !== event.dragEvent.dragEnter) {\r\n        event.dragEvent.dragEnter.classList.add('dropzone-active');\r\n        $('body').css('cursor', 'copy');\r\n        this.isSameDropzone = false;\r\n      } else {\r\n        $('body').css('cursor', '');\r\n        this.isSameDropzone = true;\r\n      }\r\n    }\r\n\r\n    private onDropDeactivateListener(event) {\r\n      if (this.sourceDropZoneElem !== event.target) {\r\n        event.target.classList.remove(this.opts.activeDropzoneClass);\r\n        $('body').css('cursor', '');\r\n      }\r\n    }\r\n\r\n    private onDropLeaveListener(event) {\r\n      event.target.classList.remove(this.opts.activeDropzoneClass);\r\n    }\r\n\r\n    private initialize() {\r\n      this._$timeout(() => {\r\n        this.availableWidth   = this.getContainerWidth();\r\n        this.availableColumns = this.getAvailableColumns(this.availableWidth);\r\n        this.groupsContainers = document.querySelectorAll(this.opts.groupContaninerSelector);\r\n        this.tileGroups       = this.initTilesGroups(this.groups, this.opts, this.groupsContainers);\r\n\r\n        interact('.pip-draggable-tile')\r\n          .draggable({\r\n            // enable autoScroll\r\n            autoScroll: true,\r\n            onstart: (event) => { this.onDragStartListener(event) },\r\n            onmove : (event) => { this.onDragMoveListener(event) },\r\n            onend  : (event) => { this.onDragEndListener() }\r\n          });\r\n        \r\n        interact('.pip-draggable-group.fict-group')\r\n          .dropzone({\r\n            ondrop: (event) => { console.log('here');  this.onDropToFictGroupListener(event) },\r\n            ondragenter     : (event) => { this.onDropEnterListener(event) },\r\n            ondropdeactivate: (event) => { this.onDropDeactivateListener(event) },\r\n            ondragleave     : (event) => { this.onDropLeaveListener(event) }\r\n          })\r\n        \r\n        interact('.pip-draggable-group')\r\n          .dropzone({\r\n            ondrop          : (event) => { this.onDropListener(event) },\r\n            ondragenter     : (event) => { this.onDropEnterListener(event) },\r\n            ondropdeactivate: (event) => { this.onDropDeactivateListener(event) },\r\n            ondragleave     : (event) => { this.onDropLeaveListener(event) }\r\n          });\r\n\r\n        this._$scope['$container']\r\n          .on('mousedown touchstart', 'md-menu .md-icon-button', () => {\r\n            interact('.pip-draggable-tile').draggable(false);\r\n            $(this).trigger('click');\r\n          })\r\n          .on('mouseup touchend', () => {\r\n            interact('.pip-draggable-tile').draggable(true);\r\n          });\r\n      }, 0);\r\n    }\r\n\r\n}\r\n\r\n\r\nangular\r\n    .module('pipDragged')\r\n    .controller('pipDraggableCtrl', DraggableController);\r\n","'use strict';\r\n\r\nangular\r\n  .module('pipDragged')\r\n  .directive('pipDraggableGrid', DragDirective);\r\n\r\nfunction DragDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    scope: {\r\n      tilesTemplates: '=pipTilesTemplates',\r\n      tilesContext: '=pipTilesContext',\r\n      options: '=pipDraggableGrid',\r\n      groupMenuActions: '=pipGroupMenuActions'\r\n    },\r\n    templateUrl: 'draggable/Draggable.html',\r\n    bindToController: true,\r\n    controllerAs: 'draggableCtrl',\r\n    controller: 'pipDraggableCtrl',\r\n    link: function ($scope, $elem) {\r\n      $scope.$container = $elem;\r\n    }\r\n  };\r\n}","'use strict';\r\n\r\nexport interface DragTileConstructor {\r\n  new (options: any);\r\n}\r\n\r\nexport function IDragTileConstructor(constructor: DragTileConstructor, options: any): IDragTileService {\r\n  return new constructor(options);\r\n}\r\n\r\nexport interface IDragTileService {\r\n  tpl: any;\r\n  opts: any;\r\n  size: any;\r\n  elem: any;\r\n  preview: any;\r\n  getSize(): any;\r\n  setSize(width, height): any;\r\n  setPosition(left, top): any;\r\n  getCompiledTemplate(): any;\r\n  updateElem(parent): any;\r\n  getElem(): any;\r\n  startDrag(): any;\r\n  stopDrag(isAnimate): any;\r\n  setPreviewPosition(coords): void;\r\n  getOptions(): any;\r\n  setOptions(options): any;\r\n}\r\n\r\nlet DEFAULT_TILE_SIZE = {\r\n  colSpan: 1,\r\n  rowSpan: 1\r\n};\r\n\r\nexport class DragTileService implements IDragTileService {\r\n  public tpl: any;\r\n  public opts: any;\r\n  public size: any;\r\n  public elem: any;\r\n  public preview: any;\r\n\r\n  constructor (options: any) {\r\n    this.tpl = options.tpl.get(0);\r\n    this.opts = options;\r\n    this.size = _.merge({}, DEFAULT_TILE_SIZE, options.size);\r\n    this.elem = null;\r\n  }\r\n\r\n  public getSize(): any {\r\n    return this.size;\r\n  }\r\n\r\n  public setSize(width, height): any {\r\n    this.size.width = width;\r\n    this.size.height = height;\r\n\r\n    if (this.elem) {\r\n      this.elem.css({\r\n        width: width,\r\n        height: height\r\n      });\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  public setPosition(left, top): any {\r\n    this.size.left = left;\r\n    this.size.top = top;\r\n\r\n    if (this.elem) {\r\n      this.elem.css({\r\n        left: left,\r\n        top: top\r\n      });\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  public getCompiledTemplate(): any {\r\n    return this.tpl;\r\n  };\r\n\r\n  public updateElem(parent): any {\r\n    this.elem = $(this.tpl).parent(parent);\r\n\r\n    return this;\r\n  };\r\n\r\n  public getElem(): any {\r\n    return this.elem.get(0);\r\n  };\r\n\r\n  public startDrag(): any {\r\n    this.preview = $('<div>')\r\n      .addClass('pip-dragged-preview')\r\n      .css({\r\n        position: 'absolute',\r\n        left: this.elem.css('left'),\r\n        top: this.elem.css('top'),\r\n        width: this.elem.css('width'),\r\n        height: this.elem.css('height')\r\n      });\r\n\r\n    this.elem\r\n      .addClass('no-animation')\r\n      .css({\r\n        zIndex: '9999'\r\n      })\r\n      .after(this.preview);\r\n\r\n    return this;\r\n  };\r\n\r\n  public stopDrag(isAnimate): any {\r\n    let self = this;\r\n\r\n    if (isAnimate) {\r\n      this.elem\r\n        .removeClass('no-animation')\r\n        .css({\r\n          left: this.preview.css('left'),\r\n          top: this.preview.css('top')\r\n        })\r\n        .on('transitionend', onTransitionEnd);\r\n    } else {\r\n      self.elem\r\n        .css({\r\n          left: self.preview.css('left'),\r\n          top: self.preview.css('top'),\r\n          zIndex: ''\r\n        })\r\n        .removeClass('no-animation');\r\n\r\n      self.preview.remove();\r\n      self.preview = null;\r\n    }\r\n\r\n    return this;\r\n\r\n    function onTransitionEnd() {\r\n      if (self.preview) {\r\n        self.preview.remove();\r\n        self.preview = null;\r\n      }\r\n\r\n      self.elem\r\n        .css('zIndex', '')\r\n        .off('transitionend', onTransitionEnd);\r\n    }\r\n  };\r\n\r\n  public setPreviewPosition(coords) {\r\n    this.preview.css(coords);\r\n  };\r\n\r\n  public getOptions(): any {\r\n    return this.opts.options;\r\n  };\r\n\r\n  public setOptions(options): any {\r\n    _.merge(this.opts.options, options);\r\n    _.merge(this.size, options.size);\r\n\r\n    return this;\r\n  };\r\n}\r\n\r\nangular\r\n  .module('pipDragged')\r\n  .service('pipDragTile', function () {\r\n    return function (options) {\r\n      let newTile = new DragTileService(options);\r\n\r\n      return newTile;\r\n    }\r\n  });","'use strict';\r\n\r\nangular\r\n  .module('pipDragged')\r\n  .directive('pipDraggableTiles', DraggableTile);\r\n\r\nfunction DraggableTile() {\r\n  return {\r\n    restrict: 'A',\r\n    link: function ($scope, $elem, $attr) {\r\n      var docFrag = document.createDocumentFragment();\r\n      var group = $scope.$eval($attr.pipDraggableTiles);\r\n\r\n      group.forEach(function (tile) {\r\n        var tpl = wrapComponent(tile.getCompiledTemplate());\r\n        docFrag.appendChild(tpl);\r\n      });\r\n\r\n      $elem.append(docFrag);\r\n\r\n      function wrapComponent(elem) {\r\n        return $('<div>')\r\n          .addClass('pip-draggable-tile')\r\n          .append(elem)\r\n          .get(0);\r\n      }\r\n    }\r\n  };\r\n}","'use strict';\r\n\r\nexport interface TilesGridConstructor {\r\n  new (tiles, options, columns, elem);\r\n}\r\n\r\nexport function ITilesGridConstructor(constructor: TilesGridConstructor, tiles, options, columns, elem):ITilesGridService {\r\n  return new constructor(tiles, options, columns, elem);\r\n}\r\n\r\nexport interface ITilesGridService {\r\n  tiles: any;\r\n  opts: any;\r\n  columns: any;\r\n  elem: any;\r\n  gridCells: any;\r\n  inline: boolean;\r\n  isMobileLayout: boolean;\r\n\r\n  addTile(tile): any;\r\n  getCellByPosition(row, col): any;\r\n  getCells(prevCell, rowSpan, colSpan): any;\r\n  getAvailableCellsDesktop(prevCell, rowSpan, colSpan): any;\r\n  getCell(src, basicRow, basicCol, columns): any;\r\n  getAvailableCellsMobile(prevCell, rowSpan, colSpan): any;\r\n  getBasicRow(prevCell): any;\r\n  isCellFree(row, col): any;\r\n  getCellIndex(srcCell): any;\r\n  reserveCells(start, end, elem): void;\r\n  clearElements(): void;\r\n  setAvailableColumns(columns): any;\r\n  generateGrid(singleTileWidth?): any;\r\n  setTilesDimensions(onlyPosition, draggedTile): any;\r\n  calcContainerHeight(): any;\r\n  getTileByNode(node): any;\r\n  getTileByCoordinates(coords, draggedTile): any;\r\n  getTileIndex(tile): any;\r\n  swapTiles(movedTile, beforeTile): any;\r\n  removeTile(removeTile): any;\r\n  updateTileOptions(opts): any;\r\n}\r\n\r\nlet MOBILE_LAYOUT_COLUMNS = 2;\r\n\r\nexport class TilesGridService implements ITilesGridService {\r\n  public tiles: any;\r\n  public opts: any;\r\n  public columns: any;\r\n  public elem: any;\r\n  public gridCells: any = [];\r\n  public inline: boolean = false;\r\n  public isMobileLayout: boolean;\r\n\r\n  constructor(tiles, options, columns, elem) {\r\n    this.tiles = tiles;\r\n    this.opts = options;\r\n    this.columns = columns || 0; // available columns in a row\r\n    this.elem = elem;\r\n    this.gridCells = [];\r\n    this.inline = options.inline || false;\r\n    this.isMobileLayout = columns === MOBILE_LAYOUT_COLUMNS;\r\n  }\r\n\r\n  public addTile(tile): any {\r\n    this.tiles.push(tile);\r\n    if (this.tiles.length === 1) {\r\n      this.generateGrid();\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  public getCellByPosition(row, col): any {\r\n    return this.gridCells[row][col];\r\n  };\r\n\r\n  public getCells(prevCell, rowSpan, colSpan): any {\r\n    if (this.isMobileLayout) {\r\n      return this.getAvailableCellsMobile(prevCell, rowSpan, colSpan);\r\n    } else {\r\n      return this.getAvailableCellsDesktop(prevCell, rowSpan, colSpan);\r\n    }\r\n  };\r\n\r\n  public getAvailableCellsDesktop(prevCell, rowSpan, colSpan): any {\r\n    let leftCornerCell;\r\n    let rightCornerCell;\r\n    let basicCol = prevCell && prevCell.col || 0;\r\n    let basicRow = this.getBasicRow(prevCell);\r\n\r\n    // Small tile\r\n    if (colSpan === 1 && rowSpan === 1) {\r\n      let gridCopy = this.gridCells.slice();\r\n\r\n      if (!prevCell) {\r\n        leftCornerCell = gridCopy[0][0];\r\n      } else {\r\n        leftCornerCell = this.getCell(gridCopy, basicRow, basicCol, this.columns);\r\n\r\n        if (!leftCornerCell) {\r\n          let rowShift = this.isMobileLayout ? 1 : 2;\r\n          leftCornerCell = this.getCell(gridCopy, basicRow + rowShift, 0, this.columns);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Medium tile\r\n    if (colSpan === 2 && rowSpan === 1) {\r\n      let prevTileSize = prevCell && prevCell.elem.size || null;\r\n\r\n      if (!prevTileSize) {\r\n        leftCornerCell = this.getCellByPosition(basicRow, basicCol);\r\n        rightCornerCell = this.getCellByPosition(basicRow, basicCol + 1);\r\n      } else if (prevTileSize.colSpan === 2 && prevTileSize.rowSpan === 2) {\r\n        if (this.columns - basicCol - 2 > 0) {\r\n          leftCornerCell = this.getCellByPosition(basicRow, basicCol + 1);\r\n          rightCornerCell = this.getCellByPosition(basicRow, basicCol + 2);\r\n        } else {\r\n          leftCornerCell = this.getCellByPosition(basicRow + 2, 0);\r\n          rightCornerCell = this.getCellByPosition(basicRow + 2, 1);\r\n        }\r\n      } else if (prevTileSize.colSpan === 2 && prevTileSize.rowSpan === 1) {\r\n        if (prevCell.row % 2 === 0) {\r\n          leftCornerCell = this.getCellByPosition(basicRow + 1, basicCol - 1);\r\n          rightCornerCell = this.getCellByPosition(basicRow + 1, basicCol);\r\n        } else {\r\n          if (this.columns - basicCol - 3 >= 0) {\r\n            leftCornerCell = this.getCellByPosition(basicRow, basicCol + 1);\r\n            rightCornerCell = this.getCellByPosition(basicRow, basicCol + 2);\r\n          } else {\r\n            leftCornerCell = this.getCellByPosition(basicRow + 2, 0);\r\n            rightCornerCell = this.getCellByPosition(basicRow + 2, 1);\r\n          }\r\n        }\r\n      } else if (prevTileSize.colSpan === 1 && prevTileSize.rowSpan === 1) {\r\n        if (this.columns - basicCol - 3 >= 0) {\r\n          if (this.isCellFree(basicRow, basicCol + 1)) {\r\n            leftCornerCell = this.getCellByPosition(basicRow, basicCol + 1);\r\n            rightCornerCell = this.getCellByPosition(basicRow, basicCol + 2);\r\n          } else {\r\n            leftCornerCell = this.getCellByPosition(basicRow, basicCol + 2);\r\n            rightCornerCell = this.getCellByPosition(basicRow, basicCol + 3);\r\n          }\r\n        } else {\r\n          leftCornerCell = this.getCellByPosition(basicRow + 2, 0);\r\n          rightCornerCell = this.getCellByPosition(basicRow + 2, 1);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Big tile\r\n    if (!prevCell && rowSpan === 2 && colSpan === 2) {\r\n      leftCornerCell = this.getCellByPosition(basicRow, basicCol);\r\n      rightCornerCell = this.getCellByPosition(basicRow + 1, basicCol + 1);\r\n    } else if (rowSpan === 2 && colSpan === 2) {\r\n      if (this.columns - basicCol - 2 > 0) {\r\n        if (this.isCellFree(basicRow, basicCol + 1)) {\r\n          leftCornerCell = this.getCellByPosition(basicRow, basicCol + 1);\r\n          rightCornerCell = this.getCellByPosition(basicRow + 1, basicCol + 2);\r\n        } else {\r\n          leftCornerCell = this.getCellByPosition(basicRow, basicCol + 2);\r\n          rightCornerCell = this.getCellByPosition(basicRow + 1, basicCol + 3);\r\n        }\r\n      } else {\r\n        leftCornerCell = this.getCellByPosition(basicRow + 2, 0);\r\n        rightCornerCell = this.getCellByPosition(basicRow + 3, 1);\r\n      }\r\n    }\r\n\r\n    return {\r\n      start: leftCornerCell,\r\n      end: rightCornerCell\r\n    };\r\n  };\r\n\r\n  public getCell(src, basicRow, basicCol, columns): any {\r\n    let cell;\r\n    let col;\r\n    let row;\r\n\r\n    if (this.isMobileLayout) {\r\n      // mobile layout\r\n      for (col = basicCol; col < columns; col++) {\r\n        if (!src[basicRow][col].elem) {\r\n          cell = src[basicRow][col];\r\n          break;\r\n        }\r\n      }\r\n\r\n      return cell;\r\n    }\r\n\r\n    // desktop\r\n    for (col = basicCol; col < columns; col++) {\r\n      for (row = 0; row < 2; row++) {\r\n        if (!src[row + basicRow][col].elem) {\r\n          cell = src[row + basicRow][col];\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (cell) {\r\n        return cell;\r\n      }\r\n    }\r\n  };\r\n\r\n  public getAvailableCellsMobile(prevCell, rowSpan, colSpan): any {\r\n    let leftCornerCell;\r\n    let rightCornerCell;\r\n    let basicRow = this.getBasicRow(prevCell);\r\n    let basicCol = prevCell && prevCell.col || 0;\r\n\r\n\r\n    if (colSpan === 1 && rowSpan === 1) {\r\n      let gridCopy = this.gridCells.slice();\r\n\r\n      if (!prevCell) {\r\n        leftCornerCell = gridCopy[0][0];\r\n      } else {\r\n        leftCornerCell = this.getCell(gridCopy, basicRow, basicCol, this.columns);\r\n\r\n        if (!leftCornerCell) {\r\n          let rowShift = this.isMobileLayout ? 1 : 2;\r\n          leftCornerCell = this.getCell(gridCopy, basicRow + rowShift, 0, this.columns);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!prevCell) {\r\n      leftCornerCell = this.getCellByPosition(basicRow, 0);\r\n      rightCornerCell = this.getCellByPosition(basicRow + rowSpan - 1, 1);\r\n    } else if (colSpan === 2) {\r\n      leftCornerCell = this.getCellByPosition(basicRow + 1, 0);\r\n      rightCornerCell = this.getCellByPosition(basicRow + rowSpan, 1);\r\n    }\r\n\r\n    return {\r\n      start: leftCornerCell,\r\n      end: rightCornerCell\r\n    };\r\n  };\r\n\r\n  public getBasicRow(prevCell): any {\r\n    let basicRow;\r\n\r\n    if (this.isMobileLayout) {\r\n      if (prevCell) {\r\n        basicRow = prevCell && prevCell.row || 0;\r\n      } else {\r\n        basicRow = 0;\r\n      }\r\n    } else {\r\n      if (prevCell) {\r\n        basicRow = prevCell.row % 2 === 0 ? prevCell.row : prevCell.row - 1;\r\n      } else {\r\n        basicRow = 0;\r\n      }\r\n    }\r\n\r\n    return basicRow;\r\n  };\r\n\r\n  public isCellFree(row, col): any {\r\n    return !this.gridCells[row][col].elem;\r\n  };\r\n\r\n  public getCellIndex(srcCell): any {\r\n    let self = this;\r\n    let index;\r\n\r\n    this.gridCells.forEach((row, rowIndex) => {\r\n      index = _.findIndex(self.gridCells[rowIndex], (cell) => {\r\n        return cell === srcCell;\r\n      });\r\n\r\n      if (index !== -1) {\r\n        return;\r\n      }\r\n    });\r\n\r\n    return index !== -1 ? index : 0;\r\n  };\r\n\r\n  public reserveCells(start, end, elem) {\r\n    this.gridCells.forEach((row) => {\r\n      row.forEach((cell) => {\r\n        if (cell.row >= start.row && cell.row <= end.row &&\r\n          cell.col >= start.col && cell.col <= end.col) {\r\n          cell.elem = elem;\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  public clearElements() {\r\n    this.gridCells.forEach((row) => {\r\n      row.forEach((tile) => {\r\n        tile.elem = null;\r\n      });\r\n    });\r\n  };\r\n\r\n  public setAvailableColumns(columns): any {\r\n    this.isMobileLayout = columns === MOBILE_LAYOUT_COLUMNS;\r\n    this.columns = columns;\r\n\r\n    return this;\r\n  };\r\n\r\n  public generateGrid(singleTileWidth?): any {\r\n    let self = this;\r\n    let colsInRow = 0;\r\n    let rows = 0;\r\n    let tileWidth = singleTileWidth || this.opts.tileWidth;\r\n    let offset = document.querySelector('.pip-draggable-group-title').getBoundingClientRect();\r\n    let gridInRow = [];\r\n\r\n    this.gridCells = [];\r\n\r\n    this.tiles.forEach((tile, index, srcTiles) => {\r\n      let tileSize = tile.getSize();\r\n\r\n      generateCells(tileSize.colSpan);\r\n\r\n      if (srcTiles.length === index + 1) {\r\n        if (colsInRow < self.columns) {\r\n          generateCells(self.columns - colsInRow);\r\n        }\r\n\r\n        // Generate more cells for extends tile size to big\r\n        if (self.tiles.length * 2 > self.gridCells.length) {\r\n          Array.apply(null, Array(self.tiles.length * 2 - self.gridCells.length)).forEach(() => {\r\n            generateCells(self.columns);\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    function generateCells(newCellCount) {\r\n        Array.apply(null, Array(newCellCount)).forEach(() => {\r\n          if (self.columns < colsInRow + 1) {\r\n            rows++;\r\n            colsInRow = 0;\r\n\r\n            self.gridCells.push(gridInRow);\r\n            gridInRow = [];\r\n          }\r\n\r\n          let top = rows * self.opts.tileHeight + (rows ? rows * self.opts.gutter : 0) + offset.height;\r\n          let left = colsInRow * tileWidth + (colsInRow ? colsInRow * self.opts.gutter : 0);\r\n\r\n          // Describe grid cell size through block corners coordinates\r\n          gridInRow.push({\r\n            top: top,\r\n            left: left,\r\n            bottom: top + self.opts.tileHeight,\r\n            right: left + tileWidth,\r\n            row: rows,\r\n            col: colsInRow\r\n          });\r\n\r\n          colsInRow++;\r\n        });\r\n      }\r\n\r\n    return this;\r\n  };\r\n\r\n  public setTilesDimensions(onlyPosition, draggedTile): any {\r\n    let self = this;\r\n    let currIndex = 0;\r\n    let prevCell;\r\n\r\n    if (onlyPosition) {\r\n      self.clearElements();\r\n    }\r\n\r\n    this.tiles.forEach((tile) => {\r\n      let tileSize = tile.getSize();\r\n      let startCell;\r\n      let width;\r\n      let height;\r\n      let cells;\r\n\r\n      tile.updateElem('.pip-draggable-tile');\r\n      if (tileSize.colSpan === 1) {\r\n        if (prevCell && prevCell.elem.size.colSpan === 2 && prevCell.elem.size.rowSpan === 1) {\r\n          startCell = self.getCells(self.getCellByPosition(prevCell.row, prevCell.col - 1), 1, 1).start;\r\n        } else {\r\n          startCell = self.getCells(prevCell, 1, 1).start;\r\n        }\r\n\r\n\r\n        if (!onlyPosition) {\r\n          width = startCell.right - startCell.left;\r\n          height = startCell.bottom - startCell.top;\r\n        }\r\n\r\n        prevCell = startCell;\r\n\r\n        self.reserveCells(startCell, startCell, tile);\r\n\r\n        currIndex++;\r\n      } else if (tileSize.colSpan === 2) {\r\n        cells = self.getCells(prevCell, tileSize.rowSpan, tileSize.colSpan);\r\n        startCell = cells.start;\r\n\r\n        if (!onlyPosition) {\r\n          width = cells.end.right - cells.start.left;\r\n          height = cells.end.bottom - cells.start.top;\r\n        }\r\n\r\n        prevCell = cells.end;\r\n\r\n        self.reserveCells(cells.start, cells.end, tile);\r\n\r\n        currIndex += 2;\r\n      }\r\n\r\n      // Render preview\r\n      // while tiles from group is dragged\r\n      if (draggedTile === tile) {\r\n        tile.setPreviewPosition({\r\n          left: startCell.left,\r\n          top: startCell.top\r\n        });\r\n\r\n        return;\r\n      }\r\n\r\n      if (!onlyPosition) {\r\n        tile.setSize(width, height);\r\n      }\r\n\r\n      tile.setPosition(startCell.left, startCell.top);\r\n    });\r\n\r\n    return this;\r\n  };\r\n\r\n  public calcContainerHeight(): any {\r\n    let maxHeightSize, maxWidthSize;\r\n\r\n    if (!this.tiles.length) {\r\n      return this;\r\n    }\r\n\r\n    maxHeightSize = _.maxBy(this.tiles, (tile) => {\r\n      let tileSize = tile['getSize']();\r\n      return tileSize.top + tileSize.height;\r\n    })['getSize']();\r\n\r\n    this.elem.style.height = maxHeightSize.top + maxHeightSize.height + 'px';\r\n\r\n    if (this.inline) {\r\n      maxWidthSize = _.maxBy(this.tiles, (tile) => {\r\n        let tileSize = tile['getSize']();\r\n        return tileSize.left + tileSize.width;\r\n      })['getSize']();\r\n\r\n      this.elem.style.width = maxWidthSize.left + maxWidthSize.width + 'px';\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  public getTileByNode(node): any {\r\n    let foundTile = this.tiles.filter((tile) => {\r\n      return node === tile.getElem();\r\n    });\r\n\r\n    return foundTile.length ? foundTile[0] : null;\r\n  };\r\n\r\n  public getTileByCoordinates(coords, draggedTile): any {\r\n    return this.tiles\r\n      .filter((tile) => {\r\n        let tileSize = tile.getSize();\r\n\r\n        return tile !== draggedTile &&\r\n          tileSize.left <= coords.left && coords.left <= (tileSize.left + tileSize.width) &&\r\n          tileSize.top <= coords.top && coords.top <= (tileSize.top + tileSize.height);\r\n      })[0] || null;\r\n  };\r\n\r\n  public getTileIndex(tile): any {\r\n    return _.findIndex(this.tiles, tile);\r\n  };\r\n\r\n  public swapTiles(movedTile, beforeTile): any {\r\n    let movedTileIndex = _.findIndex(this.tiles, movedTile);\r\n    let beforeTileIndex = _.findIndex(this.tiles, beforeTile);\r\n\r\n    this.tiles.splice(movedTileIndex, 1);\r\n    this.tiles.splice(beforeTileIndex, 0, movedTile);\r\n\r\n    return this;\r\n  };\r\n\r\n  public removeTile(removeTile): any {\r\n    let droppedTile;\r\n\r\n    this.tiles.forEach((tile, index, tiles) => {\r\n      if (tile === removeTile) {\r\n        droppedTile = tiles.splice(index, 1)[0];\r\n        return false;\r\n      }\r\n    });\r\n\r\n    return droppedTile;\r\n  };\r\n\r\n  public updateTileOptions(opts): any {\r\n    let index = _.findIndex(this.tiles, (tile) => {\r\n      return tile['getOptions']() === opts;\r\n    });\r\n\r\n    if (index !== -1) {\r\n      this.tiles[index].setOptions(opts);\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n}\r\n\r\nangular\r\n  .module('pipDragged')\r\n  .service('pipTilesGrid', function () {\r\n    return function (tiles, options, columns, elem) {\r\n      let newGrid = new TilesGridService(tiles, options, columns, elem);\r\n\r\n      return newGrid;\r\n    }\r\n  });","export interface IWidgetTemplateService {\r\n    getTemplate(source, tpl ? , tileScope ? , strictCompile ? ): any;\r\n    setImageMarginCSS($element, image): void;\r\n}\r\n\r\nclass widgetTemplateService implements IWidgetTemplateService {\r\n    private _$interpolate: angular.IInterpolateService;\r\n    private _$compile: angular.ICompileService;\r\n    private _$templateRequest: angular.ITemplateRequestService;\r\n\r\n    constructor(\r\n        $interpolate: angular.IInterpolateService,\r\n        $compile: angular.ICompileService,\r\n        $templateRequest: angular.ITemplateRequestService\r\n    ) {\r\n        this._$interpolate = $interpolate;\r\n        this._$compile = $compile;\r\n        this._$templateRequest = $templateRequest;\r\n    }\r\n\r\n    public getTemplate(source, tpl ? , tileScope ? , strictCompile ? ): any {\r\n        const {\r\n            template,\r\n            templateUrl,\r\n            type\r\n        } = source;\r\n        let result;\r\n\r\n        if (type) {\r\n            const interpolated = tpl ? this._$interpolate(tpl)(source) : this._$interpolate(template)(source);\r\n            return strictCompile == true ?\r\n                (tileScope ? this._$compile(interpolated)(tileScope) : this._$compile(interpolated)) :\r\n                interpolated;\r\n        }\r\n\r\n        if (template) {\r\n            return tileScope ? this._$compile(template)(tileScope) : this._$compile(template);\r\n        }\r\n\r\n        if (templateUrl) {\r\n            this._$templateRequest(templateUrl, false).then((html) => {\r\n                result = tileScope ? this._$compile(html)(tileScope) : this._$compile(html);\r\n            });\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public setImageMarginCSS($element, image) {\r\n        let\r\n            containerWidth = $element.width ? $element.width() : $element.clientWidth, \r\n            containerHeight = $element.height ? $element.height() : $element.clientHeight,\r\n            imageWidth = (image[0] ? image[0].naturalWidth : image.naturalWidth) || image.width,\r\n            imageHeight = (image[0] ? image[0].naturalHeight : image.naturalWidth) || image.height,\r\n            margin = 0,\r\n            cssParams = {};\r\n\r\n        if ((imageWidth / containerWidth) > (imageHeight / containerHeight)) {\r\n            margin = -((imageWidth / imageHeight * containerHeight - containerWidth) / 2);\r\n            cssParams['margin-left'] = '' + margin + 'px';\r\n            cssParams['height'] = '' + containerHeight + 'px'; //'100%';\r\n            cssParams['width'] = '' + imageWidth * containerHeight / imageHeight + 'px'; //'100%';\r\n            cssParams['margin-top'] = '';\r\n        } else {\r\n            margin = -((imageHeight / imageWidth * containerWidth - containerHeight) / 2);\r\n            cssParams['margin-top'] = '' + margin + 'px';\r\n            cssParams['height'] = '' + imageHeight * containerWidth / imageWidth + 'px'; //'100%';\r\n            cssParams['width'] = '' + containerWidth + 'px'; //'100%';\r\n            cssParams['margin-left'] = '';\r\n        }\r\n\r\n        $(image).css(cssParams);\r\n    }\r\n}\r\n\r\n// image load directive TODO: remove to pipImageUtils\r\nfunction ImageLoad($parse) {\r\n    return {\r\n        restrict: 'A',\r\n        link: function(scope, element, attrs) {\r\n            var callback = $parse(attrs.pipImageLoad);\r\n            element.bind('load', (event) => {\r\n                callback(scope, {$event: event});\r\n            });\r\n        } \r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipDashboard')\r\n    .service('pipWidgetTemplate', widgetTemplateService)\r\n    .directive('pipImageLoad', ImageLoad);","(() => {\r\n  'use strict';\r\n\r\n  angular.module('pipWidget', []);\r\n})();\r\n\r\nimport './calendar/WidgetCalendar';\r\nimport './event/WidgetEvent';\r\nimport './menu/WidgetMenuService';\r\nimport './menu/WidgetMenuDirective';\r\nimport './notes/WidgetNotes';\r\nimport './position/WidgetPosition';\r\nimport './statistics/WidgetStatistics';\r\nimport './picture_slider/WidgetPictureSlider';\r\n","import { MenuWidgetService } from '../menu/WidgetMenuService';\r\nimport { IWidgetConfigService } from '../../dialogs/widget_config/ConfigDialogService';\r\n\r\nclass CalendarWidgetController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _configDialog: IWidgetConfigService;\r\n\r\n  public color: string = 'blue';\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    pipWidgetConfigDialogService: IWidgetConfigService\r\n  ) {\r\n      super();\r\n      this._$scope = $scope;\r\n      this._configDialog = pipWidgetConfigDialogService;\r\n\r\n      if (this['options']) {\r\n        this.menu = this['options']['menu'] ? _.union(this.menu, this['options']['menu']) : this.menu;\r\n        this.menu.push({ title: 'Configurate', click: () => {\r\n          this.onConfigClick();\r\n        }});\r\n        this['options'].date = this['options'].date || new Date();\r\n        this.color = this['options'].color || this.color;\r\n      }\r\n  }\r\n\r\n  private onConfigClick() {\r\n    this._configDialog.show({\r\n      dialogClass: 'pip-calendar-config',\r\n      color: this.color,\r\n      size: this['options'].size,\r\n      date: this['options'].date,\r\n      extensionUrl: 'widgets/calendar/ConfigDialogExtension.html'\r\n    }, (result: any) => {\r\n      this.color = result.color;\r\n      this['options'].color = result.color;\r\n      this.changeSize(result.size);\r\n      this['options'].date = result.date;\r\n    });\r\n  }\r\n\r\n}\r\n\r\n(() => {\r\n\r\n  let pipCalendarWidget = {\r\n      bindings        : {\r\n        options: '=pipOptions',\r\n      },\r\n      controller      : CalendarWidgetController,\r\n      controllerAs    : 'widgetCtrl',\r\n      templateUrl     : 'widgets/calendar/WidgetCalendar.html'\r\n  }\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .component('pipCalendarWidget', pipCalendarWidget);\r\n\r\n})();\r\n","import { MenuWidgetService} from '../menu/WidgetMenuService';\r\nimport { IWidgetConfigService } from '../../dialogs/widget_config/ConfigDialogService';\r\n\r\nclass EventWidgetController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _$element: any;\r\n  private _$timeout: angular.ITimeoutService;\r\n  private _configDialog: IWidgetConfigService;\r\n  private _oldOpacity: number;\r\n\r\n  public color: string = 'gray';\r\n  public opacity: number = 0.57;\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    $element: any,\r\n    $timeout: angular.ITimeoutService,\r\n    pipWidgetConfigDialogService: IWidgetConfigService\r\n  ) {\r\n    super();\r\n    this._$scope = $scope;\r\n    this._$element = $element;\r\n    this._$timeout = $timeout;\r\n    this._configDialog = pipWidgetConfigDialogService;\r\n\r\n    if (this['options']) {\r\n      if (this['options']['menu']) this.menu = _.union(this.menu, this['options']['menu']);\r\n    }\r\n\r\n    this.menu.push({ title: 'Configurate', click: () => {\r\n          this.onConfigClick();\r\n    }});\r\n    this.color = this['options'].color || this.color;\r\n    this.opacity = this['options'].opacity || this.opacity;\r\n\r\n    this.drawImage();\r\n\r\n    // TODO it doesn't work\r\n    $scope.$watch(() => { return $element.is(':visible'); }, (newVal) => {\r\n      this.drawImage();\r\n    });\r\n  }\r\n\r\n  private drawImage() {\r\n    if (this['options'].image) {\r\n      this._$timeout(() => {\r\n        this.onImageLoad(this._$element.find('img'));\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  private onConfigClick() {\r\n    this._oldOpacity = _.clone(this.opacity);\r\n    this._configDialog.show({\r\n      dialogClass: 'pip-calendar-config',\r\n      color: this.color,\r\n      size: this['options'].size || {colSpan: 1, rowSpan: 1},\r\n      date: this['options'].date,\r\n      title: this['options'].title,\r\n      text: this['options'].text,\r\n      opacity: this.opacity,\r\n      onOpacitytest: (opacity) => {\r\n        this.opacity = opacity;\r\n      },\r\n      extensionUrl: 'widgets/event/ConfigDialogExtension.html'\r\n    }, (result: any) => {\r\n      this.color = result.color;\r\n      this['options'].color = result.color;\r\n      this.changeSize(result.size);\r\n      this['options'].date = result.date;\r\n      this['options'].title = result.title;\r\n      this['options'].text = result.text;\r\n      this['options'].opacity = result.opacity;\r\n    }, () => {\r\n      this.opacity = this._oldOpacity;\r\n    });\r\n  }\r\n\r\n  private onImageLoad(image) {\r\n    this.setImageMarginCSS(this._$element.parent(), image);\r\n  }\r\n\r\n  public changeSize(params) {\r\n    this['options'].size.colSpan = params.sizeX;\r\n    this['options'].size.rowSpan = params.sizeY;\r\n\r\n    if (this['options'].image) {\r\n      this._$timeout(() => {\r\n        this.setImageMarginCSS(this._$element.parent(), this._$element.find('img'));\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  // Later replace by pipImageUtils sevice's function\r\n  private setImageMarginCSS($element, image) {\r\n    let\r\n      containerWidth = $element.width ? $element.width() : $element.clientWidth, // || 80,\r\n      containerHeight = $element.height ? $element.height() : $element.clientHeight, // || 80,\r\n      imageWidth = image[0].naturalWidth || image.width,\r\n      imageHeight = image[0].naturalHeight || image.height,\r\n      margin = 0,\r\n      cssParams = {};\r\n\r\n    if ((imageWidth / containerWidth) > (imageHeight / containerHeight)) {\r\n      margin = -((imageWidth / imageHeight * containerHeight - containerWidth) / 2);\r\n      cssParams['margin-left'] = '' + margin + 'px';\r\n      cssParams['height'] = '' + containerHeight + 'px'; //'100%';\r\n      cssParams['width'] = '' + imageWidth * containerHeight / imageHeight + 'px'; //'100%';\r\n      cssParams['margin-top'] = '';\r\n    } else {\r\n      margin = -((imageHeight / imageWidth * containerWidth - containerHeight) / 2);\r\n      cssParams['margin-top'] = '' + margin + 'px';\r\n      cssParams['height'] = '' + imageHeight * containerWidth / imageWidth + 'px'; //'100%';\r\n      cssParams['width'] = '' + containerWidth + 'px'; //'100%';\r\n      cssParams['margin-left'] = '';\r\n    }\r\n\r\n    image.css(cssParams);\r\n  }\r\n}\r\n\r\n\r\n(() => {\r\n  let pipEventWidget =  {\r\n      bindings: {\r\n        options: '=pipOptions'\r\n      },\r\n      controller: EventWidgetController,\r\n      controllerAs: 'widgetCtrl',\r\n      templateUrl: 'widgets/event/WidgetEvent.html'\r\n  }\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .component('pipEventWidget', pipEventWidget);\r\n})();","(() => {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .directive('pipMenuWidget', pipMenuWidget);\r\n\r\n  function pipMenuWidget() {\r\n    return {\r\n      restrict        : 'EA',\r\n      templateUrl     : 'widgets/menu/WidgetMenu.html'\r\n    };\r\n  }\r\n})();\r\n","\r\nexport class MenuWidgetService {\r\n  public menu: any = [\r\n    {\r\n      title: 'Change Size',\r\n      action: angular.noop,\r\n      submenu: [{\r\n          title: '1 x 1',\r\n          action: 'changeSize',\r\n          params: {\r\n            sizeX: 1,\r\n            sizeY: 1\r\n          }\r\n        },\r\n        {\r\n          title: '2 x 1',\r\n          action: 'changeSize',\r\n          params: {\r\n            sizeX: 2,\r\n            sizeY: 1\r\n          }\r\n        },\r\n        {\r\n          title: '2 x 2',\r\n          action: 'changeSize',\r\n          params: {\r\n            sizeX: 2,\r\n            sizeY: 2\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  constructor() {\r\n    \"ngInject\";\r\n  }\r\n\r\n  public callAction(actionName, params, item) {\r\n    if (this[actionName]) {\r\n      this[actionName].call(this, params);\r\n    }\r\n\r\n    if (item['click']) {\r\n      item['click'].call(item, params, this);\r\n    }\r\n  };\r\n\r\n  public changeSize(params) {\r\n    this['options'].size.colSpan = params.sizeX;\r\n    this['options'].size.rowSpan = params.sizeY;\r\n  };\r\n}\r\n\r\nclass MenuWidgetProvider {\r\n    private _service: MenuWidgetService;\r\n\r\n    constructor() {\r\n    }\r\n\r\n   public $get() {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new MenuWidgetService();\r\n        \r\n        return this._service;\r\n    }\r\n}\r\n\r\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .provider('pipWidgetMenu', MenuWidgetProvider);\r\n})();","'use strict';\r\n\r\nimport { MenuWidgetService } from '../menu/WidgetMenuService';\r\nimport { IWidgetConfigService } from '../../dialogs/widget_config/ConfigDialogService';\r\n\r\nclass NotesWidgetController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _configDialog: IWidgetConfigService;\r\n\r\n  public color: string = 'orange';\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    pipWidgetConfigDialogService: IWidgetConfigService\r\n  ) {\r\n      super();\r\n      this._$scope = $scope;\r\n      this._configDialog = pipWidgetConfigDialogService;\r\n\r\n      if (this['options']) {\r\n        this.menu = this['options']['menu'] ? _.union(this.menu, this['options']['menu']) : this.menu;\r\n      }\r\n\r\n      this.menu.push({ title: 'Configurate', click: () => {\r\n          this.onConfigClick();\r\n      }});\r\n      this.color = this['options'].color || this.color;\r\n  }\r\n\r\n  private onConfigClick() {\r\n    this._configDialog.show({\r\n      dialogClass: 'pip-calendar-config',\r\n      color: this.color,\r\n      size: this['options'].size,\r\n      title: this['options'].title,\r\n      text: this['options'].text,\r\n      extensionUrl: 'widgets/notes/ConfigDialogExtension.html'\r\n    }, (result: any) => {\r\n      this.color = result.color;\r\n      this['options'].color = result.color;\r\n      this.changeSize(result.size);\r\n      this['options'].text = result.text;\r\n      this['options'].title = result.title;\r\n    });\r\n  }\r\n}\r\n\r\n  let pipNotesWidget = {\r\n      bindings           : {\r\n        options: '=pipOptions'\r\n      },\r\n      controller      : NotesWidgetController,\r\n      controllerAs    : 'widgetCtrl',\r\n      templateUrl     : 'widgets/notes/WidgetNotes.html'\r\n  }\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .component('pipNotesWidget', pipNotesWidget);\r\n\r\n","'use strict';\r\n\r\nimport {\r\n  MenuWidgetService\r\n} from '../menu/WidgetMenuService';\r\nimport {\r\n  IWidgetConfigService\r\n} from '../../dialogs/widget_config/ConfigDialogService';\r\nimport {\r\n  IWidgetTemplateService\r\n} from '../../utility/WidgetTemplateUtility';\r\n\r\nclass PictureSliderController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _configDialog: IWidgetConfigService;\r\n  private _widgetUtility: IWidgetTemplateService;\r\n  private _$element: any;\r\n  private _$timeout: angular.ITimeoutService;\r\n\r\n  public animationType: string = 'fading';\r\n  public animationInterval: number = 5000;\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    $element: any,\r\n    $timeout: angular.ITimeoutService,\r\n    pipWidgetConfigDialogService: IWidgetConfigService,\r\n    pipWidgetTemplate: IWidgetTemplateService\r\n  ) {\r\n    super();\r\n    this._$scope = $scope;\r\n    this._configDialog = pipWidgetConfigDialogService;\r\n    this._widgetUtility = pipWidgetTemplate;\r\n    this._$element = $element;\r\n    this._$timeout = $timeout;\r\n    if (this['options']) {\r\n      this.animationType = this['options'].animationType || this.animationType;\r\n      this.animationInterval = this['options'].animationInterval || this.animationInterval;\r\n    }\r\n  }\r\n\r\n  public onImageLoad($event) {\r\n    this._$timeout(() => {\r\n      this._widgetUtility.setImageMarginCSS(this._$element.parent(), $event.target);\r\n    });\r\n  }\r\n\r\n  public changeSize(params) {\r\n    this['options'].size.colSpan = params.sizeX;\r\n    this['options'].size.rowSpan = params.sizeY;\r\n\r\n    this._$timeout(() => {\r\n      _.each(this._$element.find('img'), (image) => {\r\n        this._widgetUtility.setImageMarginCSS(this._$element.parent(), image);\r\n      });\r\n    }, 500);\r\n  }\r\n}\r\n\r\nlet pipPictureSliderWidget = {\r\n  bindings: {\r\n    options: '=pipOptions',\r\n    index: '=',\r\n    group: '='\r\n  },\r\n  controller: PictureSliderController,\r\n  templateUrl: 'widgets/picture_slider/WidgetPictureSlider.html',\r\n  controllerAs: 'widgetCtrl'\r\n}\r\n\r\nangular\r\n  .module('pipWidget')\r\n  .component('pipPictureSliderWidget', pipPictureSliderWidget);","import {\r\n  MenuWidgetService\r\n} from '../menu/WidgetMenuService';\r\nimport {\r\n  IWidgetConfigService\r\n} from '../../dialogs/widget_config/ConfigDialogService';\r\n\r\nclass PositionWidgetController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _$timeout: angular.ITimeoutService;\r\n  private _configDialog: IWidgetConfigService;\r\n  private _locationDialog: any;\r\n\r\n  public showPosition: boolean = true;\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    $timeout: angular.ITimeoutService,\r\n    $element: any,\r\n    pipWidgetConfigDialogService: IWidgetConfigService,\r\n    pipLocationEditDialog: any,\r\n  ) {\r\n    super();\r\n    this._$scope = $scope;\r\n    this._$timeout = $timeout;\r\n    this._configDialog = pipWidgetConfigDialogService;\r\n    this._locationDialog = pipLocationEditDialog;\r\n\r\n    if (this['options']) {\r\n      if (this['options']['menu']) this.menu = _.union(this.menu, this['options']['menu']);\r\n    }\r\n\r\n    this.menu.push({\r\n      title: 'Configurate',\r\n      click: () => {\r\n        this.onConfigClick();\r\n      }\r\n    });\r\n    this.menu.push({\r\n      title: 'Change location',\r\n      click: () => {\r\n        this.openLocationEditDialog();\r\n      }\r\n    });\r\n\r\n    this['options'].location = this['options'].location || this['options'].position;\r\n\r\n    $scope.$watch('widgetCtrl.options.location', () => {\r\n      this.reDrawPosition();\r\n    });\r\n\r\n    // TODO it doesn't work\r\n    $scope.$watch(() => { return $element.is(':visible'); }, (newVal) => {\r\n      if (newVal == true) this.reDrawPosition();\r\n    });\r\n  }\r\n\r\n  private onConfigClick() {\r\n    this._configDialog.show({\r\n      dialogClass: 'pip-position-config',\r\n      size: this['options'].size,\r\n      locationName: this['options'].locationName,\r\n      hideColors: true,\r\n      extensionUrl: 'widgets/position/ConfigDialogExtension.html'\r\n    }, (result: any) => {\r\n      this.changeSize(result.size);\r\n      this['options'].locationName = result.locationName;\r\n    });\r\n  }\r\n\r\n  public changeSize(params) {\r\n    this['options'].size.colSpan = params.sizeX;\r\n    this['options'].size.rowSpan = params.sizeY;\r\n\r\n    this.reDrawPosition();\r\n  }\r\n\r\n  public openLocationEditDialog() {\r\n    this._locationDialog.show({\r\n      locationName: this['options'].locationName,\r\n      locationPos: this['options'].location\r\n    }, (newPosition) => {\r\n      if (newPosition) {\r\n        this['options'].location = newPosition.location;\r\n        this['options'].locationName = newPosition.locatioName;\r\n      }\r\n    });\r\n  }\r\n\r\n  private reDrawPosition() {\r\n    this.showPosition = false;\r\n    this._$timeout(() => {\r\n      this.showPosition = true;\r\n    }, 50);\r\n  }\r\n}\r\n\r\n\r\nlet pipPositionWidget = {\r\n  bindings: {\r\n    options: '=pipOptions',\r\n    index: '=',\r\n    group: '='\r\n  },\r\n  controller: PositionWidgetController,\r\n  controllerAs: 'widgetCtrl',\r\n  templateUrl: 'widgets/position/WidgetPosition.html'\r\n}\r\n\r\nangular\r\n  .module('pipWidget')\r\n  .component('pipPositionWidget', pipPositionWidget);","import { MenuWidgetService } from '../menu/WidgetMenuService';\r\n\r\nlet SMALL_CHART: number = 70;\r\nlet BIG_CHART: number = 250;\r\n\r\nclass StatisticsWidgetController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _$timeout: angular.ITimeoutService;\r\n\r\n  public reset: boolean = false;\r\n  public chartSize: number = SMALL_CHART;\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    $timeout: angular.ITimeoutService\r\n  ) {\r\n      super();\r\n      this._$scope = $scope;\r\n      this._$timeout = $timeout;\r\n\r\n      if (this['options']) {\r\n        this.menu = this['options']['menu'] ? _.union(this.menu, this['options']['menu']) : this.menu;\r\n      }\r\n\r\n      this.setChartSize();\r\n  }\r\n\r\n  public changeSize(params) {\r\n    this['options'].size.colSpan = params.sizeX;\r\n    this['options'].size.rowSpan = params.sizeY;\r\n\r\n    this.reset = true;\r\n    this.setChartSize();\r\n    this._$timeout(() => {\r\n      this.reset = false;\r\n    }, 500);\r\n  }\r\n\r\n  private setChartSize() {\r\n    this.chartSize = this['options'].size.colSpan == 2 && this['options'].size.rowSpan == 2 ? BIG_CHART : SMALL_CHART;\r\n  }\r\n}\r\n\r\n(() => {\r\n  'use strict';\r\n\r\n  let pipStatisticsWidget = {\r\n      bindings           : {\r\n        options: '=pipOptions'\r\n      },\r\n      bindToController: true,\r\n      controller      : StatisticsWidgetController,\r\n      controllerAs    : 'widgetCtrl',\r\n      templateUrl     : 'widgets/statistics/WidgetStatistics.html'\r\n  }\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .component('pipStatisticsWidget', pipStatisticsWidget);\r\n})();\r\n","(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('Dashboard.html',\n    '<md-button class=\"md-accent md-raised md-fab layout-column layout-align-center-center\" aria-label=\"Add component\" ng-click=\"dashboardCtrl.addComponent()\"><md-icon md-svg-icon=\"icons:plus\" class=\"md-headline centered-add-icon\"></md-icon></md-button><div class=\"pip-draggable-grid-holder\"><pip-draggable-grid pip-tiles-templates=\"dashboardCtrl.groupedWidgets\" pip-tiles-context=\"dashboardCtrl.widgetsContext\" pip-draggable-grid=\"dashboardCtrl.draggableGridOptions\" pip-group-menu-actions=\"dashboardCtrl.groupMenuActions\"></pip-draggable-grid><md-progress-circular md-mode=\"indeterminate\" class=\"progress-ring\"></md-progress-circular></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('draggable/Draggable.html',\n    '<div class=\"pip-draggable-holder\"><div class=\"pip-draggable-group\" ng-repeat=\"group in draggableCtrl.groups\" data-group-id=\"{{ $index }}\" pip-draggable-tiles=\"group.source\"><div class=\"pip-draggable-group-title layout-row layout-align-start-center\"><div class=\"title-input-container\" ng-click=\"draggableCtrl.onTitleClick(group, $event)\"><input ng-if=\"group.editingName\" ng-blur=\"draggableCtrl.onBlurTitleInput(group)\" ng-keypress=\"draggableCtrl.onKyepressTitleInput(group, $event)\" ng-model=\"group.title\"><div class=\"text-overflow flex-none\" ng-if=\"!group.editingName\">{{ group.title }}</div></div><md-button class=\"md-icon-button flex-none layout-align-center-center\" ng-show=\"group.editingName\" ng-click=\"draggableCtrl.cancelEditing(group)\" aria-label=\"Cancel\"><md-icon md-svg-icon=\"icons:cross\"></md-icon></md-button><md-menu class=\"flex-none layout-column\" md-position-mode=\"target-right target\" ng-show=\"!group.editingName\"><md-button class=\"md-icon-button flex-none layout-align-center-center\" ng-click=\"$mdOpenMenu(); groupId = $index\" aria-label=\"Menu\"><md-icon md-svg-icon=\"icons:dots\"></md-icon></md-button><md-menu-content width=\"4\"><md-menu-item ng-repeat=\"action in draggableCtrl.groupMenuActions\"><md-button ng-click=\"action.callback(groupId)\">{{ action.title }}</md-button></md-menu-item></md-menu-content></md-menu></div></div><div class=\"pip-draggable-group fict-group layout-align-center-center layout-column tm16\"><div class=\"fict-group-text-container\"><md-icon md-svg-icon=\"icons:plus\"></md-icon>{{ \\'DROP_TO_CREATE_NEW_GROUP\\' | translate }}</div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('dialogs/add_component/AddComponent.html',\n    '<md-dialog class=\"pip-dialog pip-add-component-dialog\"><md-dialog-content class=\"layout-column\"><div class=\"theme-divider p16 flex-auto\"><h3 class=\"hide-xs m0 bm16 theme-text-primary\" hide-xs=\"\">Add component<md-input-container class=\"layout-row flex-auto m0\"><md-select class=\"flex-auto m0 theme-text-primary\" ng-model=\"dialogCtrl.activeGroupIndex\" placeholder=\"Create New Group\" aria-label=\"Group\"><md-option ng-value=\"$index\" ng-repeat=\"group in dialogCtrl.groups\">{{ group }}</md-option></md-select></md-input-container></h3></div><div class=\"pip-body pip-scroll p0 flex-auto\"><p class=\"md-body-1 theme-text-secondary m0 lp16 rp16\">Use \"Enter\" or \"+\" buttons on keyboard to encrease and \"Delete\" or \"-\" to decrease tiles amount</p><md-list ng-init=\"groupIndex = $index\" ng-repeat=\"group in dialogCtrl.defaultWidgets\"><md-list-item class=\"layout-row pip-list-item lp16 rp16\" ng-repeat=\"item in group\"><div class=\"icon-holder flex-none\"><md-icon md-svg-icon=\"icons:{{:: item.icon }}\"></md-icon><div class=\"pip-badge theme-badge md-warn\" ng-if=\"item.amount\"><span>{{ item.amount }}</span></div></div><span class=\"flex-auto lm24 theme-text-primary\">{{:: item.title }}</span><md-button class=\"md-icon-button flex-none\" ng-click=\"dialogCtrl.encrease(groupIndex, $index)\" aria-label=\"Encrease\"><md-icon md-svg-icon=\"icons:plus-circle\"></md-icon></md-button><md-button class=\"md-icon-button flex-none\" ng-click=\"dialogCtrl.decrease(groupIndex, $index)\" aria-label=\"Decrease\"><md-icon md-svg-icon=\"icons:minus-circle\"></md-icon></md-button></md-list-item><md-divider class=\"lm72 tm8 bm8\" ng-if=\"groupIndex !== (dialogCtrl.defaultWidgets.length - 1)\"></md-divider></md-list></div></md-dialog-content><md-dialog-actions class=\"flex-none layout-align-end-center theme-divider divider-top theme-text-primary\"><md-button ng-click=\"dialogCtrl.cancel()\" aria-label=\"Add\">Cancel</md-button><md-button ng-click=\"dialogCtrl.add()\" arial-label=\"Cancel\">Add</md-button></md-dialog-actions></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('dialogs/widget_config/ConfigDialog.html',\n    '<md-dialog class=\"pip-dialog pip-widget-config-dialog {{ vm.params.dialogClass }}\" width=\"400\" md-theme=\"{{vm.theme}}\"><pip-widget-config-extend-component class=\"layout-column\" pip-extension-url=\"{{ vm.params.extensionUrl }}\"></pip-widget-config-extend-component></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('dialogs/widget_config/ConfigDialogExtendComponent.html',\n    '<h3 class=\"tm0 flex-none\">{{vm.dialogTitle}}</h3><div class=\"pip-body pip-scroll p16 bp0 flex-auto\"><pip-extension-point></pip-extension-point><pip-toggle-buttons class=\"bm16\" ng-if=\"!vm.hideSizes\" pip-buttons=\"vm.sizes\" ng-model=\"vm.sizeId\"></pip-toggle-buttons><pip-color-picker ng-if=\"!vm.hideColors\" pip-colors=\"vm.colors\" ng-model=\"vm.color\"></pip-color-picker></div><div class=\"pip-footer flex-none\"><div><md-button class=\"md-accent\" ng-click=\"vm.onCancel()\">Cancel</md-button><md-button class=\"md-accent\" ng-click=\"vm.onApply()\">Apply</md-button></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/calendar/ConfigDialogExtension.html',\n    '<div class=\"w-stretch bm16\">Date:<md-datepicker ng-model=\"vm.date\" class=\"w-stretch\"></md-datepicker></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/calendar/WidgetCalendar.html',\n    '<div class=\"widget-box pip-calendar-widget {{ widgetCtrl.color }} layout-column layout-fill tp0\" ng-class=\"{ small: widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1, medium: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1, big: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 2 }\"><div class=\"widget-heading layout-row layout-align-end-center flex-none\"><pip-menu-widget></pip-menu-widget></div><div class=\"widget-content flex-auto layout-row layout-align-center-center\" ng-if=\"widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1\"><span class=\"date lm24 rm12\">{{ widgetCtrl.options.date.getDate() }}</span><div class=\"flex-auto layout-column\"><span class=\"weekday md-headline\">{{ widgetCtrl.options.date | formatLongDayOfWeek }}</span> <span class=\"month-year md-headline\">{{ widgetCtrl.options.date | formatLongMonth }} {{ widgetCtrl.options.date | formatYear }}</span></div></div><div class=\"widget-content flex-auto layout-column layout-align-space-around-center\" ng-hide=\"widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1\"><span class=\"weekday md-headline\" ng-hide=\"widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1\">{{ widgetCtrl.options.date | formatLongDayOfWeek }}</span> <span class=\"weekday\" ng-show=\"widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1\">{{ widgetCtrl.options.date | formatLongDayOfWeek }}</span> <span class=\"date lm12 rm12\">{{ widgetCtrl.options.date.getDate() }}</span> <span class=\"month-year md-headline\">{{ widgetCtrl.options.date | formatLongMonth }} {{ widgetCtrl.options.date | formatYear }}</span></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/event/ConfigDialogExtension.html',\n    '<div class=\"w-stretch\"><md-input-container class=\"w-stretch bm0\"><label>Title:</label> <input type=\"text\" ng-model=\"vm.title\"></md-input-container>Date:<md-datepicker ng-model=\"vm.date\" class=\"w-stretch bm8\"></md-datepicker><md-input-container class=\"w-stretch\"><label>Description:</label> <textarea type=\"text\" ng-model=\"vm.text\">\\n' +\n    '    </textarea></md-input-container>Backdrop\\'s opacity:<md-slider aria-label=\"opacity\" type=\"number\" min=\"0.1\" max=\"0.9\" step=\"0.01\" ng-model=\"vm.opacity\" ng-change=\"vm.onOpacitytest(vm.opacity)\"></md-slider></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/event/WidgetEvent.html',\n    '<div class=\"widget-box pip-event-widget {{ widgetCtrl.color }} layout-column layout-fill\" ng-class=\"{ small: widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1, medium: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1, big: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 2 }\"><img ng-if=\"widgetCtrl.options.image\" ng-src=\"{{widgetCtrl.options.image}}\" alt=\"{{widgetCtrl.options.title || widgetCtrl.options.name}}\"><div class=\"text-backdrop\" style=\"background-color: rgba(0, 0, 0, {{ widgetCtrl.opacity }})\"><div class=\"widget-heading layout-row layout-align-start-center flex-none\"><span class=\"widget-title flex-auto text-overflow\">{{ widgetCtrl.options.title || widgetCtrl.options.name }}</span><pip-menu-widget ng-if=\"!widgetCtrl.options.hideMenu\"></pip-menu-widget></div><div class=\"text-container flex-auto pip-scroll\"><p class=\"date flex-none\" ng-if=\"widgetCtrl.options.date\">{{ widgetCtrl.options.date | formatShortDate }}</p><p class=\"text flex-auto\">{{ widgetCtrl.options.text || widgetCtrl.options.description }}</p></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/menu/WidgetMenu.html',\n    '<md-menu class=\"widget-menu\" md-position-mode=\"target-right target\"><md-button class=\"md-icon-button flex-none\" ng-click=\"$mdOpenMenu()\" aria-label=\"Menu\"><md-icon md-svg-icon=\"icons:vdots\"></md-icon></md-button><md-menu-content width=\"4\"><md-menu-item ng-repeat=\"item in widgetCtrl.menu\"><md-button ng-if=\"!item.submenu\" ng-click=\"widgetCtrl.callAction(item.action, item.params, item)\">{{:: item.title }}</md-button><md-menu ng-if=\"item.submenu\"><md-button ng-click=\"widgetCtrl.callAction(item.action)\">{{:: item.title }}</md-button><md-menu-content><md-menu-item ng-repeat=\"subitem in item.submenu\"><md-button ng-click=\"widgetCtrl.callAction(subitem.action, subitem.params, subitem)\">{{:: subitem.title }}</md-button></md-menu-item></md-menu-content></md-menu></md-menu-item></md-menu-content></md-menu>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/notes/ConfigDialogExtension.html',\n    '<div class=\"w-stretch\"><md-input-container class=\"w-stretch bm0\"><label>Title:</label> <input type=\"text\" ng-model=\"vm.title\"></md-input-container><md-input-container class=\"w-stretch tm0\"><label>Text:</label> <textarea type=\"text\" ng-model=\"vm.text\">\\n' +\n    '    </textarea></md-input-container></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/notes/WidgetNotes.html',\n    '<div class=\"widget-box pip-notes-widget {{ widgetCtrl.color }} layout-column\"><div class=\"widget-heading layout-row layout-align-start-center flex-none\" ng-if=\"widgetCtrl.options.title || widgetCtrl.options.name\"><span class=\"widget-title flex-auto text-overflow\">{{ widgetCtrl.options.title || widgetCtrl.options.name }}</span></div><pip-menu-widget ng-if=\"!widgetCtrl.options.hideMenu\"></pip-menu-widget><div class=\"text-container flex-auto pip-scroll\"><p>{{ widgetCtrl.options.text }}</p></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/picture_slider/WidgetPictureSlider.html',\n    '<div class=\"widget-box pip-picture-slider-widget {{ widgetCtrl.color }} layout-column layout-fill\" ng-class=\"{ small: widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1, medium: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1, big: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 2 }\" index=\"{{ widgetCtrl.index }}\" group=\"{{ widgetCtrl.group }}\"><div class=\"widget-heading lp16 rp8 layout-row layout-align-end-center flex-none\"><span class=\"flex text-overflow\">{{ widgetCtrl.options.title }}</span><pip-menu-widget ng-if=\"!widgetCtrl.options.hideMenu\"></pip-menu-widget></div><div class=\"slider-container\"><div pip-image-slider=\"\" pip-animation-type=\"\\'fading\\'\" pip-animation-interval=\"widgetCtrl.animationInterval\" ng-if=\"widgetCtrl.animationType == \\'fading\\'\"><div class=\"pip-animation-block\" ng-repeat=\"slide in widgetCtrl.options.slides\"><img ng-src=\"{{ slide.image }}\" alt=\"{{ slide.image }}\" pip-image-load=\"widgetCtrl.onImageLoad($event)\"><p class=\"slide-text\" ng-if=\"slide.text\">{{ slide.text }}</p></div></div><div pip-image-slider=\"\" pip-animation-type=\"\\'carousel\\'\" pip-animation-interval=\"widgetCtrl.animationInterval\" ng-if=\"widgetCtrl.animationType == \\'carousel\\'\"><div class=\"pip-animation-block\" ng-repeat=\"slide in widgetCtrl.options.slides\"><img ng-src=\"{{ slide.image }}\" alt=\"{{ slide.image }}\" pip-image-load=\"widgetCtrl.onImageLoad($event)\"><p class=\"slide-text\" ng-if=\"slide.text\">{{ slide.text }}</p></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/position/ConfigDialogExtension.html',\n    '<div class=\"w-stretch\"><md-input-container class=\"w-stretch bm0\"><label>Location name:</label> <input type=\"text\" ng-model=\"vm.locationName\"></md-input-container></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/position/WidgetPosition.html',\n    '<div class=\"pip-position-widget widget-box p0 layout-column layout-fill\" ng-class=\"{ small: widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1, medium: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1, big: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 2 }\" index=\"{{ widgetCtrl.index }}\" group=\"{{ widgetCtrl.group }}\"><div class=\"position-absolute-right-top\" ng-if=\"!widgetCtrl.options.locationName\"><pip-menu-widget ng-if=\"!widgetCtrl.options.hideMenu\"></pip-menu-widget></div><div class=\"widget-heading lp16 rp8 layout-row layout-align-end-center flex-none\" ng-if=\"widgetCtrl.options.locationName\"><span class=\"flex text-overflow\">{{ widgetCtrl.options.locationName }}</span><pip-menu-widget ng-if=\"!widgetCtrl.options.hideMenu\"></pip-menu-widget></div><pip-location-map class=\"flex\" ng-if=\"widgetCtrl.showPosition\" pip-stretch=\"true\" pip-rebind=\"true\" pip-location-pos=\"widgetCtrl.options.location\"></pip-location-map></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/statistics/WidgetStatistics.html',\n    '<div class=\"widget-box pip-statistics-widget layout-column layout-fill\" ng-class=\"{ small: widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1, medium: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1, big: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 2 }\"><div class=\"widget-heading layout-row layout-align-start-center flex-none\"><span class=\"widget-title flex-auto text-overflow\">{{ widgetCtrl.options.title || widgetCtrl.options.name }}</span><pip-menu-widget></pip-menu-widget></div><div class=\"widget-content flex-auto layout-row layout-align-center-center\" ng-if=\"widgetCtrl.options.series && !widgetCtrl.reset\"><pip-pie-chart pip-series=\"widgetCtrl.options.series\" ng-if=\"!widgetCtrl.options.chartType || widgetCtrl.options.chartType == \\'pie\\'\" pip-donut=\"true\" pip-pie-size=\"widgetCtrl.chartSize\" pip-show-total=\"true\" pip-centered=\"true\"></pip-pie-chart></div></div>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-dashboard-html.min.js.map\n"]}